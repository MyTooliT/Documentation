<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>ICOtronic Documentation</title>
  <meta name="description" content="Documentation for the ICOTronic system: https://www.mytoolit.com/ICOtronic" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="ICOtronic Documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Documentation for the ICOTronic system: https://www.mytoolit.com/ICOtronic" />
  <meta name="github-repo" content="MyTooliT/Documentation" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="ICOtronic Documentation" />
  
  <meta name="twitter:description" content="Documentation for the ICOTronic system: https://www.mytoolit.com/ICOtronic" />
  

<meta name="author" content="MyTooliT" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path=""><a href="#documentation"><i class="fa fa-check"></i><b>1</b> Documentation</a></li>
<li class="chapter" data-level="2" data-path=""><a href="#download"><i class="fa fa-check"></i><b>2</b> Download</a></li>
<li class="chapter" data-level="3" data-path=""><a href="#build"><i class="fa fa-check"></i><b>3</b> Build</a></li>
<li class="chapter" data-level="4" data-path=""><a href="#akronyms"><i class="fa fa-check"></i><b>4</b> Akronyms</a></li>
<li class="chapter" data-level="5" data-path=""><a href="#terms"><i class="fa fa-check"></i><b>5</b> Terms</a></li>
<li class="chapter" data-level="6" data-path=""><a href="#overview-icotronic-system"><i class="fa fa-check"></i><b>6</b> Overview ICOtronic System</a></li>
<li class="chapter" data-level="7" data-path=""><a href="#adc"><i class="fa fa-check"></i><b>7</b> ADC</a><ul>
<li class="chapter" data-level="7.1" data-path=""><a href="#guesstimates"><i class="fa fa-check"></i><b>7.1</b> Guesstimates</a></li>
<li class="chapter" data-level="7.2" data-path=""><a href="#sources"><i class="fa fa-check"></i><b>7.2</b> Sources</a></li>
<li class="chapter" data-level="7.3" data-path=""><a href="#further-reading"><i class="fa fa-check"></i><b>7.3</b> Further Reading</a></li>
<li class="chapter" data-level="7.4" data-path=""><a href="#shared-adc-spi-pin"><i class="fa fa-check"></i><b>7.4</b> Shared ADC SPI Pin</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path=""><a href="#eeprom"><i class="fa fa-check"></i><b>8</b> EEPROM</a><ul>
<li class="chapter" data-level="8.1" data-path=""><a href="#terms-1"><i class="fa fa-check"></i><b>8.1</b> Terms</a></li>
<li class="chapter" data-level="8.2" data-path=""><a href="#layout"><i class="fa fa-check"></i><b>8.2</b> Layout</a><ul>
<li class="chapter" data-level="8.2.1" data-path=""><a href="#pages"><i class="fa fa-check"></i><b>8.2.1</b> Pages:</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path=""><a href="#sth-eeprom"><i class="fa fa-check"></i><b>8.3</b> STH EEPROM</a><ul>
<li class="chapter" data-level="8.3.1" data-path=""><a href="#used-pages"><i class="fa fa-check"></i><b>8.3.1</b> Used Pages</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path=""><a href="#stu-eeprom"><i class="fa fa-check"></i><b>8.4</b> STU EEPROM</a><ul>
<li class="chapter" data-level="8.4.1" data-path=""><a href="#used-pages-1"><i class="fa fa-check"></i><b>8.4.1</b> Used Pages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path=""><a href="#mytoolit-communication-protocol"><i class="fa fa-check"></i><b>9</b> MyTooliT Communication Protocol</a><ul>
<li class="chapter" data-level="9.1" data-path=""><a href="#introduction"><i class="fa fa-check"></i><b>9.1</b> Introduction</a><ul>
<li class="chapter" data-level="9.1.1" data-path=""><a href="#reserved-bits"><i class="fa fa-check"></i><b>9.1.1</b> Reserved Bits</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path=""><a href="#protocol-specification"><i class="fa fa-check"></i><b>9.2</b> Protocol Specification</a><ul>
<li class="chapter" data-level="9.2.1" data-path=""><a href="#identifier"><i class="fa fa-check"></i><b>9.2.1</b> Identifier</a></li>
<li class="chapter" data-level="9.2.2" data-path=""><a href="#command"><i class="fa fa-check"></i><b>9.2.2</b> Command</a></li>
<li class="chapter" data-level="9.2.3" data-path=""><a href="#abstracted-can-messages"><i class="fa fa-check"></i><b>9.2.3</b> Abstracted CAN Messages</a></li>
<li class="chapter" data-level="9.2.4" data-path=""><a href="#addressing"><i class="fa fa-check"></i><b>9.2.4</b> Addressing</a></li>
<li class="chapter" data-level="9.2.5" data-path=""><a href="#dlc"><i class="fa fa-check"></i><b>9.2.5</b> DLC</a></li>
<li class="chapter" data-level="9.2.6" data-path=""><a href="#payload"><i class="fa fa-check"></i><b>9.2.6</b> Payload</a></li>
<li class="chapter" data-level="9.2.7" data-path=""><a href="#startup-an-backup-strategy"><i class="fa fa-check"></i><b>9.2.7</b> Startup an Backup Strategy</a></li>
<li class="chapter" data-level="9.2.8" data-path=""><a href="#transmission-speed"><i class="fa fa-check"></i><b>9.2.8</b> Transmission Speed</a></li>
<li class="chapter" data-level="9.2.9" data-path=""><a href="#bluetooth"><i class="fa fa-check"></i><b>9.2.9</b> Bluetooth</a></li>
<li class="chapter" data-level="9.2.10" data-path=""><a href="#can-2.0"><i class="fa fa-check"></i><b>9.2.10</b> CAN 2.0</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path=""><a href="#commands"><i class="fa fa-check"></i><b>10</b> Commands</a><ul>
<li class="chapter" data-level="10.1" data-path=""><a href="#blocks"><i class="fa fa-check"></i><b>10.1</b> Blocks</a></li>
<li class="chapter" data-level="10.2" data-path=""><a href="#block-system"><i class="fa fa-check"></i><b>10.2</b> Block <code>System</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path=""><a href="#command-verboten"><i class="fa fa-check"></i><b>10.2.1</b> Command <code>Verboten</code></a></li>
<li class="chapter" data-level="10.2.2" data-path=""><a href="#command-reset"><i class="fa fa-check"></i><b>10.2.2</b> Command <code>Reset</code></a></li>
<li class="chapter" data-level="10.2.3" data-path=""><a href="#command-getset-state"><i class="fa fa-check"></i><b>10.2.3</b> Command <code>Get/Set State</code></a></li>
<li class="chapter" data-level="10.2.4" data-path=""><a href="#command-get-node-status"><i class="fa fa-check"></i><b>10.2.4</b> Command <code>Get Node Status</code></a></li>
<li class="chapter" data-level="10.2.5" data-path=""><a href="#command-get-error-status"><i class="fa fa-check"></i><b>10.2.5</b> Command <code>Get Error Status</code></a></li>
<li class="chapter" data-level="10.2.6" data-path=""><a href="#command-bluetooth"><i class="fa fa-check"></i><b>10.2.6</b> Command <code>Bluetooth</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path=""><a href="#block-streaming"><i class="fa fa-check"></i><b>10.3</b> Block <code>Streaming</code></a><ul>
<li class="chapter" data-level="10.3.1" data-path=""><a href="#values-1"><i class="fa fa-check"></i><b>10.3.1</b> Values</a></li>
<li class="chapter" data-level="10.3.2" data-path=""><a href="#command-acceleration"><i class="fa fa-check"></i><b>10.3.2</b> Command <code>Acceleration</code></a></li>
<li class="chapter" data-level="10.3.3" data-path=""><a href="#command-voltage"><i class="fa fa-check"></i><b>10.3.3</b> Command <code>Voltage</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path=""><a href="#block-statistical-data-and-quantity"><i class="fa fa-check"></i><b>10.4</b> Block <code>Statistical Data and Quantity</code></a><ul>
<li class="chapter" data-level="10.4.1" data-path=""><a href="#command-power-on-cycles-power-off-cycles"><i class="fa fa-check"></i><b>10.4.1</b> Command <code>Power On Cycles, Power Off Cycles</code></a></li>
<li class="chapter" data-level="10.4.2" data-path=""><a href="#command-operating-time"><i class="fa fa-check"></i><b>10.4.2</b> Command <code>Operating time</code></a></li>
<li class="chapter" data-level="10.4.3" data-path=""><a href="#command-under-voltage-counter"><i class="fa fa-check"></i><b>10.4.3</b> Command <code>Under Voltage Counter</code></a></li>
<li class="chapter" data-level="10.4.4" data-path=""><a href="#command-watchdog-reset-counter"><i class="fa fa-check"></i><b>10.4.4</b> Command <code>Watchdog Reset Counter</code></a></li>
<li class="chapter" data-level="10.4.5" data-path=""><a href="#command-production-date"><i class="fa fa-check"></i><b>10.4.5</b> Command <code>Production Date</code></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path=""><a href="#block-configuration"><i class="fa fa-check"></i><b>10.5</b> Block <code>Configuration</code></a><ul>
<li class="chapter" data-level="10.5.1" data-path=""><a href="#command-getset-acceleration-configuration"><i class="fa fa-check"></i><b>10.5.1</b> Command <code>Get/Set Acceleration Configuration</code></a></li>
<li class="chapter" data-level="10.5.2" data-path=""><a href="#command-getset-calibration-factor-k"><i class="fa fa-check"></i><b>10.5.2</b> Command <code>Get/Set Calibration Factor k</code></a></li>
<li class="chapter" data-level="10.5.3" data-path=""><a href="#command-getset-calibration-factor-d"><i class="fa fa-check"></i><b>10.5.3</b> Command <code>Get/Set Calibration Factor d</code></a></li>
<li class="chapter" data-level="10.5.4" data-path=""><a href="#command-calibration-measurement"><i class="fa fa-check"></i><b>10.5.4</b> Command <code>Calibration Measurement</code></a></li>
<li class="chapter" data-level="10.5.5" data-path=""><a href="#command-hmi-configuration"><i class="fa fa-check"></i><b>10.5.5</b> Command <code>HMI Configuration</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path=""><a href="#block-eeprom"><i class="fa fa-check"></i><b>10.6</b> Block <code>EEPROM</code></a><ul>
<li class="chapter" data-level="10.6.1" data-path=""><a href="#command-eeprom-read"><i class="fa fa-check"></i><b>10.6.1</b> Command <code>EEPROM Read</code></a></li>
<li class="chapter" data-level="10.6.2" data-path=""><a href="#command-eeprom-write"><i class="fa fa-check"></i><b>10.6.2</b> Command <code>EEPROM Write</code></a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path=""><a href="#block-productdata-and-rfid"><i class="fa fa-check"></i><b>10.7</b> Block <code>ProductData and RFID</code></a><ul>
<li class="chapter" data-level="10.7.1" data-path=""><a href="#command-global-trade-identification-number-gtin"><i class="fa fa-check"></i><b>10.7.1</b> Command <code>Global Trade Identification Number (GTIN)</code></a></li>
<li class="chapter" data-level="10.7.2" data-path=""><a href="#command-hardware-version"><i class="fa fa-check"></i><b>10.7.2</b> Command <code>Hardware Version</code></a></li>
<li class="chapter" data-level="10.7.3" data-path=""><a href="#command-firmware-version"><i class="fa fa-check"></i><b>10.7.3</b> Command <code>Firmware Version</code></a></li>
<li class="chapter" data-level="10.7.4" data-path=""><a href="#command-release-name"><i class="fa fa-check"></i><b>10.7.4</b> Command <code>Release Name</code></a></li>
<li class="chapter" data-level="10.7.5" data-path=""><a href="#command-serial-number"><i class="fa fa-check"></i><b>10.7.5</b> Command <code>Serial Number</code></a></li>
<li class="chapter" data-level="10.7.6" data-path=""><a href="#command-name"><i class="fa fa-check"></i><b>10.7.6</b> Command <code>Name</code></a></li>
<li class="chapter" data-level="10.7.7" data-path=""><a href="#command-oem-free-use"><i class="fa fa-check"></i><b>10.7.7</b> Command <code>OEM Free Use</code></a></li>
<li class="chapter" data-level="10.7.8" data-path=""><a href="#command-tool-rfid-product-information"><i class="fa fa-check"></i><b>10.7.8</b> Command <code>Tool RFID product information</code></a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path=""><a href="#block-test"><i class="fa fa-check"></i><b>10.8</b> Block <code>Test</code></a><ul>
<li class="chapter" data-level="10.8.1" data-path=""><a href="#command-test-signal"><i class="fa fa-check"></i><b>10.8.1</b> Command <code>Test signal</code></a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path=""><a href="#errors"><i class="fa fa-check"></i><b>10.9</b> Errors</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ICOtronic Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">ICOtronic Documentation</h1>
<p class="author"><em>MyTooliT</em></p>
</div>
<div id="documentation" class="section level1">
<h1><span class="header-section-number">1</span> Documentation</h1>
<p>This repository collects various documentation for the <a href="https://www.mytoolit.com/ICOtronic">ICOtronic system</a>.</p>
</div>
<div id="download" class="section level1">
<h1><span class="header-section-number">2</span> Download</h1>
<p>You can access this repository and its submodules using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">git</span> clone --recursive git@github.com:MyTooliT/Documentation.git</span></code></pre></div>
</div>
<div id="build" class="section level1">
<h1><span class="header-section-number">3</span> Build</h1>
<p>You can use <a href="http://bookdown.org">bookdown</a> to generate</p>
<ul>
<li>HTML,</li>
<li><a href="https://en.m.wikipedia.org/wiki/EPUB">EPUB</a>, and</li>
<li>PDF</li>
</ul>
<p>versions of this documentation. To do that please use the following <a href="https://en.m.wikipedia.org/wiki/Makefile">make</a> commands:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Generate HTML documentation</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">make</span> html</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># Generate PDF</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">make</span> pdf</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># Generate EPUB document</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">make</span> epub</span></code></pre></div>

</div>
<div id="akronyms" class="section level1">
<h1><span class="header-section-number">4</span> Akronyms</h1>
<ul>
<li><strong>AEM</strong>: Advanced Energy Monitoring</li>
<li><strong>BP</strong>: Byte Position</li>
<li><strong>CAN</strong>: Controller Area Network</li>
<li><strong>CAN-FD</strong>: CAN Flexible Data Rate</li>
<li><strong>CSMA/CD</strong>: Carrier Sense Multiple Access/Collision Detection</li>
<li><strong>CSMA/CR</strong>: Carrier Sense Multiple Access/Collision Resolution</li>
<li><strong>DLC</strong>: Data Length Code</li>
<li><strong>ECU</strong>: Electronic Control Units</li>
<li><strong>ESD</strong>: Electro Statical Discharge</li>
<li><strong>GD1</strong>: Graceful Degradation Level 1</li>
<li><strong>GD2</strong>: Graceful Degradation Level 2</li>
<li><strong>MSB</strong>: Most Significant Byte</li>
<li><strong>SHA</strong>: Sensory Holder Assembly</li>
<li><strong>STH</strong>: Sensory Tool Holder</li>
<li><strong>STU</strong>: Stationary Transceiver Unit</li>
</ul>

</div>
<div id="terms" class="section level1">
<h1><span class="header-section-number">5</span> Terms</h1>
<ul>
<li><strong>Event (Message)</strong>: Even messages transport information about signals and events/states</li>
<li><strong>Header</strong>: Supplemental data placed at the beginning of a block</li>
<li><strong>Jitter</strong>: Difference between best-case time and worst-case time</li>
<li><strong>Node</strong>: Self-contained unit that interacts with other nodes via the MyTooliT communication protocol</li>
<li><strong>Payload</strong>: Transmitted user data</li>
<li><strong>Trailer</strong>: Terminating part of a message; May support check functionality</li>
</ul>

</div>
<div id="overview-icotronic-system" class="section level1">
<h1><span class="header-section-number">6</span> Overview ICOtronic System</h1>
<p>The text below describes how the (lower levels) of the ICOtronic system <em>should work</em>. Currently the system works similarly, but</p>
<ul>
<li>the communication interface (ICOconnect),</li>
<li>the tests (ICOtest), and</li>
<li>the user interface (ICOc)</li>
</ul>
<p>are all part of a <a href="https://github.com/MyTooliT/ICOc">single monolithic code base</a>.</p>
<ul>
<li><p><strong>ICOconnect</strong></p>
<ul>
<li>Python package for CAN access to sensor hardware</li>
<li>Based on <a href="http://github.com/MyTooliT/Protocol">MyTooliT Communication protocol</a></li>
<li>Ideally available online (via <a href="https://pypi.org">PyPi</a>)
(requires opening up the code)</li>
</ul></li>
<li><p><strong>ICOc</strong></p>
<ul>
<li>Uses ICOconnect to communicate with sensor hardware</li>
<li>User interface for sensor hardware</li>
<li>Configures STH/STU attributes (e.g. name, sampling frequency)</li>
<li>Records data (e.g. acceleration values) as log files</li>
</ul></li>
<li><p><strong>ICOtest</strong></p>
<ul>
<li>Uses ICOconnect to communicate with sensor hardware</li>
<li>Test environment for sensor hardware (STH, STU)</li>
<li>Tests if the hardware works correctly</li>
</ul></li>
<li><p><strong>ICOtools</strong></p>
<ul>
<li>Scripts that use data stored by ICOc to analyze captured data</li>
</ul></li>
</ul>
<p><img src="Pictures/ICOtronic.svg" width="45%" style="display: block; margin: auto;" /></p>

</div>
<div id="adc" class="section level1">
<h1><span class="header-section-number">7</span> ADC</h1>
<div id="guesstimates" class="section level2">
<h2><span class="header-section-number">7.1</span> Guesstimates</h2>
<ul>
<li><span class="math inline">\(\frac{3.9 kS}{s} · 256 ~ \text{oversamples} = \frac{1 MS}{s}\)</span> → 500kHz max. unambiguous signal detection (Nyquist)</li>
<li><span class="math inline">\(\frac{15.6 kS}{s} · 64 ~ \text{oversamples} = \frac{15.6 kS}{s}\)</span> → 8kHz max. unambiguous signal detection (Nyquist)</li>
</ul>
</div>
<div id="sources" class="section level2">
<h2><span class="header-section-number">7.2</span> Sources</h2>
<ul>
<li>ADC stuff in BGM data sheets: search for SFDR - Spurious-free dynamic range (same as max. frequency, but good search query keyword)</li>
<li>1MS/s as ADC info (max. ADC)</li>
<li>oversample rates taken from Walther’s documentation, since result gets to 8kHz (what we use) this seems plausible</li>
</ul>
</div>
<div id="further-reading" class="section level2">
<h2><span class="header-section-number">7.3</span> Further Reading</h2>
<ul>
<li>somewhere some old ADC tests by NL (which combinations work, which don’t)</li>
<li>shared ADC pin with SPI and other stuff</li>
</ul>
</div>
<div id="shared-adc-spi-pin" class="section level2">
<h2><span class="header-section-number">7.4</span> Shared ADC SPI Pin</h2>
<p>known since 2019 Spring, documented here 2021 Spring</p>
<ul>
<li>due to low pin count on BGM113 the PIN register is shared between ADC and SPI, as well as other functions</li>
<li>on BGM12x other pins could be moved away, probably would alleviate ADC config issues</li>
<li>Walther however dropped out 2020 before move to BGM12x</li>
</ul>

</div>
</div>
<div id="eeprom" class="section level1">
<h1><span class="header-section-number">8</span> EEPROM</h1>
<div id="terms-1" class="section level2">
<h2><span class="header-section-number">8.1</span> Terms</h2>
<ul>
<li><a name="term:little-endian">Little Endian</a>: Store the least significant byte (LSB) at the first (smallest) memory address and the most significant byte (MSB) at the last (highest) memory address</li>
</ul>
</div>
<div id="layout" class="section level2">
<h2><span class="header-section-number">8.2</span> Layout</h2>
<ul>
<li>Every page consists of 256 bytes</li>
<li>The address of a page is the page number multiplied by 256</li>
</ul>
<div id="pages" class="section level3">
<h3><span class="header-section-number">8.2.1</span> Pages:</h3>
<table>
<colgroup>
<col width="6%" />
<col width="31%" />
<col width="61%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Page Number</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td><a href="#page:system-configuration">System Configuration</a></td>
<td>Store system specific data e.g. Bluetooth name and advertisement time</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td><a href="#page:product-data">Product Data</a></td>
<td>Store product data e.g. serial number</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td><a href="#page:statistics">Statistics</a></td>
<td>Store statistic data e.g. power on/off cycles</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td><a href="#page:calibration">Calibration</a></td>
<td>Store configuration data like slope (<code>k</code>) and offset (<code>d</code>) values to derive SI value from ADC value</td>
</tr>
</tbody>
</table>
<p><a name="page:system-configuration"></a></p>
<div id="page-system-configuration" class="section level4">
<h4><span class="header-section-number">8.2.1.1</span> Page <code>System Configuration</code></h4>
<table style="width:100%;">
<colgroup>
<col width="3%" />
<col width="4%" />
<col width="16%" />
<col width="65%" />
<col width="6%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Byte</th>
<th align="right">Length</th>
<th>Name</th>
<th>Comment</th>
<th>Format</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">1</td>
<td>Init</td>
<td>• <code>0xac</code>: Initialized <br/> • <code>0xca</code>: Locked <br/> • Other Value: Uninitialized)</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">8</td>
<td>Radio Name</td>
<td>Bluetooth advertisement name</td>
<td>ASCII</td>
<td>-</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">4</td>
<td>Sleep Time 1</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>ms</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">2</td>
<td>Advertisement Time 1</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>ms</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">4</td>
<td>Sleep Time 2</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>ms</td>
</tr>
<tr class="even">
<td align="right">19</td>
<td align="right">2</td>
<td>Advertisement Time 2</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>ms</td>
</tr>
</tbody>
</table>
<div id="sleep-advertisement-times" class="section level5">
<h5><span class="header-section-number">8.2.1.1.1</span> Sleep &amp; Advertisement Times</h5>
<p><img src="Pictures/STH%20States.svg" width="80%" style="display: block; margin: auto;" /></p>
<ul>
<li><code>Sleep Time 1</code>: Time to switch from the <code>Disconnected</code> state to <code>Sleep Mode 1</code> (low power usage)</li>
<li><code>Sleep Time 2</code>: Time switch from the <code>Sleep Mode 1</code> state to <code>Sleep Mode 2</code> (very low power usage)</li>
<li><code>Advertisement Time 1</code>: Advertisement time in <code>Sleep Mode 1</code></li>
<li><code>Advertisement Time 2</code>: Advertisement time in <code>Sleep Mode 2</code></li>
</ul>
<p><a name="page:product-data"></a></p>
</div>
</div>
<div id="page-product-data" class="section level4">
<h4><span class="header-section-number">8.2.1.2</span> Page <code>Product Data</code></h4>
<table>
<thead>
<tr class="header">
<th align="right">Byte</th>
<th align="right">Length</th>
<th>Name</th>
<th>Comment</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">8</td>
<td>Global Trade Identification Number (GTIN)</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">5</td>
<td>Hardware Version: Reserved</td>
<td></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="right">1</td>
<td>Hardware Version: Major</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="right">1</td>
<td>Hardware Version: Minor</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">1</td>
<td>Hardware Version: Patch</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="right">5</td>
<td>Firmware Version: Reserved</td>
<td></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="right">1</td>
<td>Firmware Version: Major</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="right">1</td>
<td>Firmware Version: Minor</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="right">1</td>
<td>Firmware Version: Patch</td>
<td></td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="right">8</td>
<td><a href="#value:release-name">Release Name</a></td>
<td></td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td align="right">32</td>
<td align="right">32</td>
<td><a href="#value:serial-number">Serial Number</a></td>
<td></td>
<td>UTF-8</td>
</tr>
<tr class="even">
<td align="right">64</td>
<td align="right">128</td>
<td><a href="#value:product-name">Product Name</a></td>
<td></td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td align="right">192</td>
<td align="right">64</td>
<td><a href="#value:oem-free-use">OEM Free Use</a></td>
<td></td>
<td>-</td>
</tr>
</tbody>
</table>
<div id="version-numbers" class="section level5">
<h5><span class="header-section-number">8.2.1.2.1</span> Version Numbers</h5>
<ul>
<li>Version numbers will look like this <code>Major.Minor.Patch</code> (e.g. <code>1.2.3</code>)</li>
<li>Major specifies the first digit of the version number (usually only increased for “breaking” changes)</li>
<li>Minor specifies the second digit of the version number (usually only increased for “minor” changes)</li>
<li>Patch specifies the third digit of the version number (usually increased for “bug fixes”)</li>
</ul>
<p><a name="value:release-name"></a></p>
</div>
<div id="release-name" class="section level5">
<h5><span class="header-section-number">8.2.1.2.2</span> Release Name</h5>
<p>This text specifies the code name of the STH/STU software release</p>
<p><a name="value:serial-number"></a></p>
</div>
<div id="serial-number" class="section level5">
<h5><span class="header-section-number">8.2.1.2.3</span> Serial Number</h5>
<ul>
<li>Place for manufacture serial number (derived from ISBN)</li>
<li>Possible Layout:
<ul>
<li>Product Group</li>
<li>Subgroup</li>
<li>Manufacture ID</li>
<li>Product Number</li>
<li>Check Digit</li>
</ul></li>
<li>Currently unused</li>
</ul>
<p><a name="value:product-name"></a></p>
</div>
<div id="product-name" class="section level5">
<h5><span class="header-section-number">8.2.1.2.4</span> Product Name</h5>
<ul>
<li>This text might be used to extend the serial Number</li>
<li>Possible Use: URL that point to additional information</li>
<li>Currently unused</li>
</ul>
<p><a name="value:oem-free-use"></a></p>
</div>
<div id="oem-free-use" class="section level5">
<h5><span class="header-section-number">8.2.1.2.5</span> OEM Free Use</h5>
<ul>
<li>Manufacture specific information</li>
<li>Format is free to choose</li>
</ul>
<p><a name="page:statistics"></a></p>
</div>
</div>
<div id="page-statistics" class="section level4">
<h4><span class="header-section-number">8.2.1.3</span> Page <code>Statistics</code></h4>
<table>
<thead>
<tr class="header">
<th align="right">Byte</th>
<th align="right">Length</th>
<th>Name</th>
<th>Comment</th>
<th>Format</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">4</td>
<td><a href="#value:power-on-cycles">Power On Cycles</a></td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>-</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">4</td>
<td>Power Off Cycles</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>-</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">4</td>
<td>Operating Time</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>s</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">4</td>
<td><a href="#value:under-voltage-counter">Under Voltage Counter</a></td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>-</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">4</td>
<td>Watchdog Reset Counter</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Unsigned</td>
<td>-</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">4</td>
<td>Production Date: Year</td>
<td></td>
<td>ASCII</td>
<td>-</td>
</tr>
<tr class="odd">
<td align="right">24</td>
<td align="right">2</td>
<td>Production Date: Month</td>
<td></td>
<td>ASCII</td>
<td>-</td>
</tr>
<tr class="even">
<td align="right">26</td>
<td align="right">2</td>
<td>Production Date: Day</td>
<td></td>
<td>ASCII</td>
<td>-</td>
</tr>
<tr class="odd">
<td align="right">28</td>
<td align="right">4</td>
<td>Batch Number</td>
<td>Consecutive number for manufactured devices</td>
<td>ASCII</td>
<td>-</td>
</tr>
</tbody>
</table>
<p><a name="value:power-on-cycles"></a></p>
<div id="power-on-cycles" class="section level5">
<h5><span class="header-section-number">8.2.1.3.1</span> Power On Cycles</h5>
<p>Please note, that a reset also counts as power on cycle</p>
<p><a name="value:under-voltage-counter"></a></p>
</div>
<div id="under-voltage-counter" class="section level5">
<h5><span class="header-section-number">8.2.1.3.2</span> Under Voltage Counter</h5>
<p>Counts of under voltages that cause turn off state (brownout)</p>
<p><a name="page:calibration"></a></p>
</div>
</div>
<div id="page-calibration" class="section level4">
<h4><span class="header-section-number">8.2.1.4</span> Page <code>Calibration</code></h4>
<table>
<thead>
<tr class="header">
<th align="right">Byte</th>
<th align="right">Length</th>
<th>Name</th>
<th>Comment</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">4</td>
<td>Acceleration X: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">4</td>
<td>Acceleration X: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">4</td>
<td>Acceleration Y: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">4</td>
<td>Acceleration Y: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">4</td>
<td>Acceleration Z: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">4</td>
<td>Acceleration Z: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">24</td>
<td align="right">4</td>
<td>Voltage Battery: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">28</td>
<td align="right">4</td>
<td>Voltage Battery: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">32</td>
<td align="right">4</td>
<td>Voltage 2: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">36</td>
<td align="right">4</td>
<td>Voltage 2: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">40</td>
<td align="right">4</td>
<td>Voltage 3: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="right">4</td>
<td>Voltage 3: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">48</td>
<td align="right">4</td>
<td>Internal Temperature: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">52</td>
<td align="right">4</td>
<td>Internal Temperature: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">56</td>
<td align="right">4</td>
<td>Temperature 2: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="right">4</td>
<td>Temperature 2: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="odd">
<td align="right">64</td>
<td align="right">4</td>
<td>Temperature 3: Slope</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
<tr class="even">
<td align="right">68</td>
<td align="right">4</td>
<td>Temperature 3: Offset</td>
<td><a href="#term:little-endian">Little Endian</a></td>
<td>Float</td>
</tr>
</tbody>
</table>
<div id="slope-offset" class="section level5">
<h5><span class="header-section-number">8.2.1.4.1</span> Slope &amp; Offset</h5>
<p>The values slope (<code>k</code>) and offset (<code>d</code>) specify the values in the equation for the <a href="https://en.m.wikipedia.org/wiki/Linear_function">linear function</a>:</p>
<p><span class="math display">\[
y = f(x) = k·x + d
\]</span></p>

</div>
</div>
</div>
</div>
<div id="sth-eeprom" class="section level2">
<h2><span class="header-section-number">8.3</span> STH EEPROM</h2>
<p>This file contains the default values of the STH EEPROM. For a more detailed description of the values, please take a look at the <a href="EEPROM.md">description of the EEPROM layout</a>.</p>
<div id="used-pages" class="section level3">
<h3><span class="header-section-number">8.3.1</span> Used Pages</h3>
<table>
<thead>
<tr class="header">
<th align="right">Page Number</th>
<th>Page Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x0</code></td>
<td><a href="#page:sth-system-configuration">System Configuration</a></td>
</tr>
<tr class="even">
<td align="right"><code>0x4</code></td>
<td><a href="#page:sth-product-data">Product Data</a></td>
</tr>
<tr class="odd">
<td align="right"><code>0x5</code></td>
<td><a href="#page:sth-statistics">Statistics</a></td>
</tr>
<tr class="even">
<td align="right"><code>0x8</code></td>
<td><a href="#page:sth-calibration">Calibration</a></td>
</tr>
</tbody>
</table>
<p><a name="page:sth-system-configuration"></a></p>
<div id="page-system-configuration-1" class="section level4">
<h4><span class="header-section-number">8.3.1.1</span> Page <code>System Configuration</code></h4>
<table>
<colgroup>
<col width="9%" />
<col width="3%" />
<col width="2%" />
<col width="4%" />
<col width="61%" />
<col width="13%" />
<col width="1%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th>Value</th>
<th>Comment</th>
<th>Unit</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EEPROM Status</td>
<td align="right">0</td>
<td align="right">1</td>
<td>True</td>
<td><code>0xac</code></td>
<td>Value for initialized EEPROM</td>
<td>-</td>
<td></td>
</tr>
<tr class="even">
<td>STH Name</td>
<td align="right">1</td>
<td align="right">8</td>
<td>False</td>
<td><a href="https://github.com/MyTooliT/ICOc/tree/master/Scripts#mac-address-conversion">Base64 encoded Bluetooth MAC address</a> or firmware name</td>
<td>e.g. <code>CGvXAd6B</code>, <code>Tanja</code></td>
<td>-</td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td>Sleep Time 1</td>
<td align="right">9</td>
<td align="right">4</td>
<td>False</td>
<td>300000</td>
<td>5 minutes</td>
<td>ms</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Advertisement Time 1</td>
<td align="right">13</td>
<td align="right">2</td>
<td>False</td>
<td>2000</td>
<td>2 seconds</td>
<td>ms</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td>Sleep Time 2</td>
<td align="right">15</td>
<td align="right">4</td>
<td>False</td>
<td>259200000</td>
<td>3 days</td>
<td>ms</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Advertisement Time 2</td>
<td align="right">19</td>
<td align="right">2</td>
<td>False</td>
<td>4000</td>
<td>4 seconds</td>
<td>ms</td>
<td>Unsigned</td>
</tr>
</tbody>
</table>
<div id="initialization" class="section level5">
<h5><span class="header-section-number">8.3.1.1.1</span> Initialization</h5>
<p>All of the values of the system configuration are set to default values on reset of the STH, if the EEPROM status (byte) is <strong>not</strong> set to <code>Initialized</code> (<code>0xac</code>) or <code>Locked</code> (<code>0xca</code>). The default values are described above. The name is set to the firmware version name (<code>Tanja</code>) and does not use the Base64 encoded Bluetooth MAC address.</p>
<p><a name="page:sth-product-data"></a></p>
</div>
</div>
<div id="page-product-data-1" class="section level4">
<h4><span class="header-section-number">8.3.1.2</span> Page <code>Product Data</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th>Value</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GTIN</td>
<td align="right">0</td>
<td align="right">8</td>
<td>True</td>
<td>0</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:sth-hardware-version">Hardware Version: Major</a></td>
<td align="right">13</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-hardware-version">Hardware Version: Minor</a></td>
<td align="right">14</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:sth-hardware-version">Hardware Version: Patch</a></td>
<td align="right">15</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-firmware-version">Firmware Version: Major</a></td>
<td align="right">21</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:sth-firmware-version">Firmware Version: Minor</a></td>
<td align="right">22</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-firmware-version">Firmware Version: Patch</a></td>
<td align="right">23</td>
<td align="right">1</td>
<td>False</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:sth-release-name">Release Name</a></td>
<td align="right">24</td>
<td align="right">8</td>
<td>False</td>
<td>Tanja</td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-serial-number">Serial Number</a></td>
<td align="right">32</td>
<td align="right">32</td>
<td>True</td>
<td>0</td>
<td>UTF-8</td>
</tr>
<tr class="even">
<td><a href="#value:sth-product-name">Product Name</a></td>
<td align="right">64</td>
<td align="right">128</td>
<td>True</td>
<td>0</td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-oem-free-use">OEM Free Use</a></td>
<td align="right">192</td>
<td align="right">64</td>
<td>True</td>
<td>0</td>
<td>-</td>
</tr>
</tbody>
</table>
<div id="version-numbers-1" class="section level5">
<h5><span class="header-section-number">8.3.1.2.1</span> Version Numbers</h5>
<ul>
<li><a name="value:sth-hardware-version"></a> <strong>Hardware Version</strong>: This number depends on the hardware version (printed on the PCB). The value itself can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">main configuration file of ICOc</a></li>
<li><a name="value:sth-firmware-version"></a> <strong>Firmware Version</strong>: This number depends on the current <a href="https://github.com/MyTooliT/STH/releases">STH software version</a></li>
<li><a name="value:sth-release-name"></a> <strong>Release Name</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:sth-serial-number"></a> <strong>Serial Number</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:sth-product-name"></a> <strong>Product Name</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:sth-oem-free-use"></a> <strong>OEM Free Use</strong>: This value can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
</ul>
<p><a name="page:sth-statistics"></a></p>
</div>
</div>
<div id="page-statistics-1" class="section level4">
<h4><span class="header-section-number">8.3.1.3</span> Page <code>Statistics</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th align="right">Value</th>
<th>Unit</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Power On Cycles</td>
<td align="right">0</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Power Off Cycles</td>
<td align="right">4</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td>Operating Time</td>
<td align="right">8</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>s</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Under Voltage Counter</td>
<td align="right">12</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td>Watchdog Reset Counter</td>
<td align="right">16</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:sth-production-date">Production Date: Year</a></td>
<td align="right">20</td>
<td align="right">4</td>
<td>False</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-production-date">Production Date: Month</a></td>
<td align="right">24</td>
<td align="right">2</td>
<td>False</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="even">
<td><a href="#value:sth-production-date">Production Date: Day</a></td>
<td align="right">26</td>
<td align="right">2</td>
<td>False</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="odd">
<td><a href="#value:sth-batch-number">Batch Number</a></td>
<td align="right">28</td>
<td align="right">4</td>
<td>True</td>
<td align="right">-</td>
<td>-</td>
<td>Unsigned</td>
</tr>
</tbody>
</table>
<ul>
<li><a name="value:sth-production-date"><strong>Production Date</strong>:</a> This date depends on the production date of the STH (printed on the PCB). It can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
<li><a name="value:sth-batch-number"><strong>Batch Number</strong>:</a> This value can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
</ul>
<p><a name="page:sth-calibration"></a></p>
</div>
<div id="page-calibration-1" class="section level4">
<h4><span class="header-section-number">8.3.1.4</span> Page <code>Calibration</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th>Value</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#value:acceleration-x-slope">Acceleration X: Slope</a></td>
<td align="right">0</td>
<td align="right">4</td>
<td>False</td>
<td>-</td>
<td>Float</td>
</tr>
<tr class="even">
<td><a href="#value:acceleration-x-offset">Acceleration X: Offset</a></td>
<td align="right">4</td>
<td align="right">4</td>
<td>False</td>
<td>-</td>
<td>Float</td>
</tr>
</tbody>
</table>
<div id="acceleration" class="section level5">
<h5><span class="header-section-number">8.3.1.4.1</span> Acceleration</h5>
<ul>
<li><p><a name="value:acceleration-x-slope"></a> <strong>Acceleration X: Slope</strong>: A Acceleration increase for a single step according to the following formula:</p>
<p><span class="math display">\[
\frac{a_{max}}{{ADC}_{max}}
\]</span></p>
<p>Here</p>
<ul>
<li><span class="math inline">\(a_{max}\)</span> is the maximum acceleration difference (e.g. <code>200</code> for a ±100 g sensor)</li>
<li><span class="math inline">\({{ADC}_{max}}\)</span> is the maximum value of the ADC (e.g. <code>65553</code> (= <code>2¹⁶</code>) for a 16-bit analog-digital converter)</li>
</ul></li>
<li><p><a name="value:acceleration-x-offset"></a> <strong>Acceleration X: Offset</strong>: The negative offset of the acceleration value according to the following formula</p>
<p><span class="math display">\[
-\frac{a_{max}}{2}
\]</span></p>
<p>Here <span class="math inline">\(a_{max}\)</span> is the maximum acceleration difference (e.g. <code>100</code> for a ±50 g sensor)</p></li>
</ul>

</div>
</div>
</div>
</div>
<div id="stu-eeprom" class="section level2">
<h2><span class="header-section-number">8.4</span> STU EEPROM</h2>
<p>This file contains the default values for the STU EEPROM. For a more detailed description of the values, please take a look at the <a href="EEPROM.md">description of the EEPROM layout</a>.</p>
<div id="used-pages-1" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Used Pages</h3>
<table>
<thead>
<tr class="header">
<th align="right">Page Number</th>
<th>Page Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x0</code></td>
<td><a href="#page:stu-system-configuration">System Configuration</a></td>
</tr>
<tr class="even">
<td align="right"><code>0x4</code></td>
<td><a href="#page:stu-product-data">Product Data</a></td>
</tr>
<tr class="odd">
<td align="right"><code>0x5</code></td>
<td><a href="#page:stu-statistics">Statistics</a></td>
</tr>
</tbody>
</table>
<p><a name="page:stu-system-configuration"></a></p>
<div id="page-system-configuration-2" class="section level4">
<h4><span class="header-section-number">8.4.1.1</span> Page <code>System Configuration</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th>Value</th>
<th>Comment</th>
<th>Unit</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EEPROM Status</td>
<td align="right">0</td>
<td align="right">1</td>
<td>True</td>
<td><code>0xac</code></td>
<td>Value for initialized EEPROM</td>
<td>-</td>
<td></td>
</tr>
<tr class="even">
<td>STU Name</td>
<td align="right">1</td>
<td align="right">8</td>
<td>False</td>
<td>Firmware version name</td>
<td>e.g. <code>Valerie</code></td>
<td>-</td>
<td>UTF-8</td>
</tr>
</tbody>
</table>
<div id="initialization-1" class="section level5">
<h5><span class="header-section-number">8.4.1.1.1</span> Initialization</h5>
<p>All of the values of the system configuration are set to the default values above on reset of the STU, if the EEPROM status (byte) is <strong>not</strong> set to <code>Initialized</code> (<code>0xac</code>) or <code>Locked</code> (<code>0xca</code>). The values for the sleep times and advertisement times are set (to the same values the STH uses) on initialization too. However, since the STU is not battery-powered these timing values are probably not relevant.</p>
<p><a name="page:stu-product-data"></a></p>
</div>
</div>
<div id="page-product-data-2" class="section level4">
<h4><span class="header-section-number">8.4.1.2</span> Page <code>Product Data</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th>Value</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GTIN</td>
<td align="right">0</td>
<td align="right">8</td>
<td>True</td>
<td>0</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:stu-hardware-version">Hardware Version: Major</a></td>
<td align="right">13</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-hardware-version">Hardware Version: Minor</a></td>
<td align="right">14</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:stu-hardware-version">Hardware Version: Patch</a></td>
<td align="right">15</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-firmware-version">Firmware Version: Major</a></td>
<td align="right">21</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:stu-firmware-version">Firmware Version: Minor</a></td>
<td align="right">22</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-firmware-version">Firmware Version: Patch</a></td>
<td align="right">23</td>
<td align="right">1</td>
<td>True</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:stu-release-name">Release Name</a></td>
<td align="right">24</td>
<td align="right">8</td>
<td>True</td>
<td>Valerie</td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-serial-number">Serial Number</a></td>
<td align="right">32</td>
<td align="right">32</td>
<td>True</td>
<td>0</td>
<td>UTF-8</td>
</tr>
<tr class="even">
<td><a href="#value:stu-product-name">Product Name</a></td>
<td align="right">64</td>
<td align="right">128</td>
<td>True</td>
<td>0</td>
<td>UTF-8</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-oem-free-use">OEM Free Use</a></td>
<td align="right">192</td>
<td align="right">64</td>
<td>True</td>
<td>0</td>
<td>-</td>
</tr>
</tbody>
</table>
<div id="version-numbers-2" class="section level5">
<h5><span class="header-section-number">8.4.1.2.1</span> Version Numbers</h5>
<ul>
<li><a name="value:stu-hardware-version"></a> <strong>Hardware Version</strong>: This number depends on the hardware version (printed on the PCB). The value itself can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">main configuration file of ICOc</a></li>
<li><a name="value:stu-firmware-version"></a> <strong>Firmware Version</strong>: This number depends on the current <a href="https://github.com/MyTooliT/STU/releases">STU software version</a></li>
<li><a name="value:stu-release-name"></a> <strong>Release Name</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:stu-serial-number"></a> <strong>Serial Number</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:stu-product-name"></a> <strong>Product Name</strong>: This text can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a></li>
<li><a name="value:stu-oem-free-use"></a> <strong>OEM Free Use</strong>: This value can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
</ul>
<p><a name="page:stu-statistics"></a></p>
</div>
</div>
<div id="page-statistics-2" class="section level4">
<h4><span class="header-section-number">8.4.1.3</span> Page <code>Statistics</code></h4>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th align="right">Address</th>
<th align="right">Length</th>
<th>Read Only</th>
<th align="right">Value</th>
<th>Unit</th>
<th>Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Power On Cycles</td>
<td align="right">0</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Power Off Cycles</td>
<td align="right">4</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td>Operating Time</td>
<td align="right">8</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>s</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td>Under Voltage Counter</td>
<td align="right">12</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="odd">
<td>Watchdog Reset Counter</td>
<td align="right">16</td>
<td align="right">4</td>
<td>True</td>
<td align="right">0</td>
<td>-</td>
<td>Unsigned</td>
</tr>
<tr class="even">
<td><a href="#value:stu-production-date">Production Date: Year</a></td>
<td align="right">20</td>
<td align="right">4</td>
<td>True</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-production-date">Production Date: Month</a></td>
<td align="right">24</td>
<td align="right">2</td>
<td>True</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="even">
<td><a href="#value:stu-production-date">Production Date: Day</a></td>
<td align="right">26</td>
<td align="right">2</td>
<td>True</td>
<td align="right">-</td>
<td>-</td>
<td>ASCII</td>
</tr>
<tr class="odd">
<td><a href="#value:stu-batch-number">Batch Number</a></td>
<td align="right">28</td>
<td align="right">4</td>
<td>True</td>
<td align="right">-</td>
<td>-</td>
<td>Unsigned</td>
</tr>
</tbody>
</table>
<ul>
<li><a name="value:stu-production-date"><strong>Production Date</strong>:</a> This date depends on the production date of the STU. It can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
<li><a name="value:stu-batch-number"><strong>Batch Number</strong>:</a> This value can be changed in the <a href="https://github.com/MyTooliT/ICOc/blob/master/Configuration/config.yaml">configuration of ICOc</a>.</li>
</ul>

</div>
</div>
</div>
</div>
<div id="mytoolit-communication-protocol" class="section level1">
<h1><span class="header-section-number">9</span> MyTooliT Communication Protocol</h1>
<p>This document defines the MyTooliT network protocol. The MyTooliT network protocol exchanges information over data link layers like Bluetooth or Controller Area Network (CAN).</p>
<p>CAN (2.0) logically splits a message into</p>
<ul>
<li>a payload, and</li>
<li>an identifier.</li>
</ul>
<p>The identifier contains</p>
<ul>
<li>a sender field to define the node of origin of each message,</li>
<li>a receiver field to define a message receiver, and</li>
<li>the command number to
<ul>
<li>specify actions,</li>
<li>answers to actions,</li>
<li>or specify errors.</li>
</ul></li>
</ul>
<p>Each command, defined by its number, will be acknowledged via the same command number. A</p>
<ul>
<li>request bit defines request (acknowledgement) commands, and</li>
<li>an error bit defines errors.</li>
</ul>
<p>Please note that errors must not requested.</p>
<p>The MyTooliT communication protocol may also exchange information via Bluetooth. For that purpose CAN messages will be stored into the payload of a data link layer like Bluetooth. The identifier field is handled via a 4 byte header and the payload by an additional payload that follows each message header. Note that a message may have a larger payload than 8 bytes (up to 64 Bytes per message as defined by the CAN-FD specification) but the length is limited to 8 bytes, if CAN 2.0 is used in the transport chain.</p>
<p>The MyTooliT protocol can also use other data link layer formats like CAN-FD. For example, you can use the protocol for IP application because it is an end-to-end based network protocol.</p>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">9.1</span> Introduction</h2>
<p>CAN was introduced by BOSCH in the 1980s in the automotive industry to exchange short real time messages between Electronic Control Units (ECU). Each ECU may act as a master i.e. send frames and thus each ECU may control the system</p>
<ul>
<li>by inserting error frames,</li>
<li>acknowledging frames,</li>
<li>sending information or</li>
<li>processing information.</li>
</ul>
<p>A standard base format (11 bit identifier) and an extended format (29 bit identifier) exist. The MyTooliT communication protocol is based on the extended format. The following figure describes the extended format:</p>
<div class="figure">
<img src="Pictures/CAN%20Frame.png" alt="" />
<p class="caption">CAN Frame</p>
</div>
<p>For more information, please take a look at the <a href="https://en.wikipedia.org/wiki/CAN_bus">Wikipedia article about CAN</a> or other available literature (e.g. <a href="https://repositum.tuwien.at/retrieve/27430">Experimental Framework for Controller Area Network based on a Multi-Processor-System-on-a- Chip</a>).</p>
<p>A main feature of CAN are prioritized messages i.e. if two or more senders try to send messages simultaneously, the message with the highest priority (lowest identifier) will be sent instantly and the remaining ones afterwards (CSMA/CR).</p>
<p>This design requires that each message identifier must be unique (each sender has a set of messages) and subscribers must queue messages according to their priority.</p>
<p>The priority-based concept of messages is a key feature of the MyTooliT network protocol. The protocol uses CAN 2.0, Bluetooth and other data link layer protocols to transport messages between end nodes. Thus, MyTooliT transport messages between end nodes over diverse data link protocols. The flow control is managed by the prioritization of messages, the end-to-end-communication and by limiting the overall traffic to 40%/60% of the total bandwidth.</p>
<div id="reserved-bits" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Reserved Bits</h3>
<p>Reserved Bits must be transmitted as <code>0</code>. This is required for compatibility.</p>
</div>
</div>
<div id="protocol-specification" class="section level2">
<h2><span class="header-section-number">9.2</span> Protocol Specification</h2>
<p>Each CAN 2.0 frame consists of</p>
<ul>
<li>an identifier,</li>
<li>a payload,</li>
<li>a data length code (DLC), and</li>
<li>physical transport bits.</li>
</ul>
<p>The following figure shows the essential parts of an extended CAN 2.0 frame:</p>
<table>
<thead>
<tr class="header">
<th align="center">Identifier</th>
<th align="center">DLC</th>
<th align="center">Payload</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">29 Bits</td>
<td align="center">4 Bits</td>
<td align="center">0 – 8 Bytes</td>
</tr>
</tbody>
</table>
<p>The</p>
<ul>
<li>identifier describes the message,</li>
<li>the data length code stores the length of the payload (CAN 2.0: 0 – 8 Byte, CAN-FD 0 – 64 bytes), and</li>
<li>the payload stores message data.</li>
</ul>
<div id="identifier" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Identifier</h3>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">V</th>
<th align="center">Command</th>
<th align="center">R1</th>
<th align="center">Sender</th>
<th align="center">R2</th>
<th align="center">Receiver</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit</td>
<td align="center">0</td>
<td align="center">1 – 16</td>
<td align="center">17</td>
<td align="center">18 – 22</td>
<td align="center">23</td>
<td align="center">24 – 28</td>
</tr>
</tbody>
</table>
<p>The following table describes the identifier field.</p>
<table>
<colgroup>
<col width="4%" />
<col width="95%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Field</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">V</td>
<td>Version number <br/> • Must be <code>0</code> or the frame will be discarded</td>
</tr>
<tr class="even">
<td align="center">Command</td>
<td>Command to be executed or acknowledged</td>
</tr>
<tr class="odd">
<td align="center">R1/R2</td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="center">Sender</td>
<td>Number of the original sender (frames may hop) <br/> • <code>0</code> Not allowed</td>
</tr>
<tr class="odd">
<td align="center">Receiver</td>
<td>Number of the target receiver (frames may hop) <br/> • <code>0</code> broadcasts at field bus (local network) with ACK <br/> • <code>0x1F</code> broadcasts at field bus (local network) without ACK</td>
</tr>
</tbody>
</table>
</div>
<div id="command" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Command</h3>
<table>
<thead>
<tr class="header">
<th align="center"></th>
<th align="center">Command Number</th>
<th align="center">A</th>
<th align="center">E</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit</td>
<td align="center">0 – 13</td>
<td align="center">14</td>
<td align="center">15</td>
</tr>
</tbody>
</table>
<p>The command number contains the command block and the block command:</p>
<table>
<thead>
<tr class="header">
<th align="center">Block</th>
<th align="center">Block Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0 – 5</td>
<td align="center">6 – 13</td>
</tr>
</tbody>
</table>
<p>The following table describes the whole command field.</p>
<table>
<colgroup>
<col width="3%" />
<col width="96%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Field</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Command Number</td>
<td>• 64 command blocks (6 Bit) <br/> • A command block supports up to 256 (8 Bit) block commands <br/> • Values: 1 – 16383 (14 bit), <code>0</code> is not valid <br/> • Commands are described <a href="Commands.md">here</a></td>
</tr>
<tr class="even">
<td align="center">A</td>
<td>Acknowledge field <br/> • <code>1</code> for a request <br/> • <code>0</code> for an acknowledgement <br/> Note that a single command may trigger multiple acknowledges (streaming).</td>
</tr>
<tr class="odd">
<td align="center">E</td>
<td>Error Bit <br/> • Indicates an error <br/> • <code>1</code> if it is an error <br/> • <code>0</code> if it is not an error <br/> • An error code is supported via the payload <br/> • The error format is 8 bytes long. The first byte describes the error number and the following 7 bytes are used for an error description. Furthermore, there are general errors (1 – 255) that are followed by <code>0</code> and specific errors that are followed by variable bits.</td>
</tr>
</tbody>
</table>
</div>
<div id="abstracted-can-messages" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Abstracted CAN Messages</h3>
<p>As mentioned in the introduction the MyTooliT protocol derives the priorities message concept from CAN 2.0. Therefore, the CAN header (identifier and DLC) are abstracted by a 4 byte header as described in the table below.</p>
<p>Note: The <code>DLC0</code> bit is at position 0 and the command resides in the 2 bytes at the highest addresses.</p>
<table>
<colgroup>
<col width="6%" />
<col width="21%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th>Bit</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0 – 3</td>
<td>Data Length Code (DLC)</td>
<td>Length of message as described by the CAN-FD standard</td>
</tr>
<tr class="even">
<td>4 – 8</td>
<td>Receiver</td>
<td>End subscriber to be addressed as described in the Section “Identifier”</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Reserved</td>
<td>Reserved</td>
</tr>
<tr class="even">
<td>10 – 14</td>
<td>Sender</td>
<td>End subscriber that sends message as described in the Section “Identifier”</td>
</tr>
<tr class="odd">
<td>15</td>
<td>Reserved</td>
<td>Reserved</td>
</tr>
<tr class="even">
<td>16 – 31</td>
<td>Command</td>
<td>Command as described in Section “Command Field”</td>
</tr>
</tbody>
</table>
<p>The transport of messages over a data link layer (except CAN 2.0) are fulfilled by putting messages consisting of header and payload in a row up to the length of the data link layer payload. Each node manage the prioritization of messages in each send queue by a prioritized message queue.</p>
</div>
<div id="addressing" class="section level3">
<h3><span class="header-section-number">9.2.4</span> Addressing</h3>
<p>A network consists of two or more subscribers and each subscriber use a unique number (1 – 30; 0 = Broadcast with ACK; 31 = Broadcast without ACK) called address. The address targets a specific subscriber (or all subscribers). Note that the send number is important for the acknowledgement.</p>
<p>This addressing scheme yields an end-to-end management of the communication state i.e. the internal states of elements inside the end-to-end subscribers do not influence the logical communication state. Thus, only a single channel must be supported for a MyTooliT information exchange i.e. an incoming message that does not address the subscriber is discarded or forwarded. This means the MyTooliT commands can be used over other communication protocols like Bluetooth. Note that the simultaneous transport via CAN 2.0 may not possible due to the replication of the sender and receiver (and the command) at the data link layer.</p>
<p>In the MyTooliT protocol the subscribers manage the error handling e.g. re-request something after a timeout. If that is not the case, then other counter measurements must be fulfilled.</p>
<p>The following figure shows the overall idea of network addressing.</p>
<div class="figure">
<img src="Pictures/End%20To%20End%20Communication.png" alt="" />
<p class="caption">End To End Communication</p>
</div>
</div>
<div id="dlc" class="section level3">
<h3><span class="header-section-number">9.2.5</span> DLC</h3>
<p>The MyTooliT protocol uses the DLC as described the CAN-FD standard. The DLC must transfer over other protocols in the same format. Thus the DLC is limited by the data link layer i.e. requesting a command via CAN 2.0 and Bluetooth yields a limit of 8 bytes.</p>
</div>
<div id="payload" class="section level3">
<h3><span class="header-section-number">9.2.6</span> Payload</h3>
<p>The payload transports user data and/or sub-payloads.</p>
</div>
<div id="startup-an-backup-strategy" class="section level3">
<h3><span class="header-section-number">9.2.7</span> Startup an Backup Strategy</h3>
<p>This is currently not implemented. CAN transmits at 1 MBit gross (gross bitrate: bitrate including physical protocol overhead) and Bluetooth transmits the payload at 1Mbit net (net bitrate: bitrate excluding physical protocol overhead). Note, that Bluetooth is a CSMA/CD protocol that will cause jitter without taking any other actions. Collisions also reduce the total bandwidth.</p>
</div>
<div id="transmission-speed" class="section level3">
<h3><span class="header-section-number">9.2.8</span> Transmission Speed</h3>
<p>The transmission speed depends of the supported data link layer formats.</p>
</div>
<div id="bluetooth" class="section level3">
<h3><span class="header-section-number">9.2.9</span> Bluetooth</h3>
<p>The actual Bluetooth transmissions speed is 1 MBit gross. However, a message transmission might be delayed due to CSMA/CD. CSMA/CD prevents transmission, if an ongoing transport is in process in the corresponding transport frequency interval. Each collision delays the transport time exponentially. Note that simultaneously sending or any radio interference may destroy any radio frame and the actual Bluetooth configuration avoids re-requests at the protocol stack level (application must do this).</p>
<p>Bluetooth supports a net bandwidth of about 700 kBit if each frame is 255 bytes long. However, Bluetooth applications supports a maximum net bandwidth of about 420 kbit/s.</p>
</div>
<div id="can-2.0" class="section level3">
<h3><span class="header-section-number">9.2.10</span> CAN 2.0</h3>
<p>The transmission speed should be aligned to a maximum of 40% of the total bandwidth. However, in any case there must not be any higher utilization than 60% of the overall bandwidth. In the case of fair message distribution with many nodes and many sporadic messages, the limit should be a utilization of 40%. In cases with many permanent messages the limit may be set to 60%.</p>
<p>The 40% utilization for CAN2.0 with bit stuffing is calculated as follows:</p>
<p><span class="math display">\[
U = \frac{m·79+ \sum_{m=0}^{m} \left( 8·p_m + \lfloor{p_m·\frac{8}{5}} \rfloor \right)}{B}
\]</span></p>
<p>Here</p>
<ul>
<li>B is the gross bandwidth per second (e.g. 1Mbit/s),</li>
<li>m is the overall number of send messages per second,</li>
<li><span class="math inline">\(p_m\)</span> the payload length in bytes for each message and</li>
<li>U is the overall utilization.</li>
</ul>
<p>The 60% utilization without bit stuffing is calculated as follows:</p>
<p><span class="math display">\[
U = \frac{m·67+ \sum_{m=0}^{m} \left( 8·p_m \right)}{B}
\]</span></p>
<p>The 40% utilization for CAN-FD with bit stuffing is calculated as follows:</p>
<p><span class="math display">\[
U = \frac{m·79}{B_{ID}} + \frac{\sum_{m=0}^{m} \left( 8·p_m + \lfloor{p_m·\frac{8}{5}} \rfloor \right)}{B_p}
\]</span></p>
<p>Here</p>
<ul>
<li><span class="math inline">\(B_{ID}\)</span> is the gross identifier bandwidth per second (e.g. 1Mbit/s), and</li>
<li><span class="math inline">\(B_p\)</span> is the gross payload bandwidth per second (e.g. 8 Mbit/s).</li>
</ul>
<p>The 60% utilization for CAN-FD without bit stuffing is calculated as follows:</p>
<p><span class="math display">\[
U = \frac{m·67}{B_{ID}}+ \frac{\sum_{m=0}^{m} \left( 8·p_m \right)}{B_p}
\]</span></p>
<p>Thus the bandwidth consumption for a streaming message (64 bytes payload each ms) calculates as follows at 1Mbit/8Mbit:</p>
<p><span class="math display">\[
U_{Stuff} = \frac{1000·79}{1000000} + \frac{1000·(512 + 102)}{8000000} = 0.079 + 0.07675 = 0.15575 (15.6\%)
\]</span></p>
<p>and</p>
<p><span class="math display">\[
U = \frac{1000·67}{1000000} + \frac{1000·512}{8000000} = 0.067 + 0.064 = 0.131 (13.1\%)
\]</span></p>
<p>Alarm messages – they will be periodically repeated until muted or alarm off event occurs e.g. temperature drops under a certain limit after reaching certain alarm limit – and streaming messages are periodic messages.</p>
<p>Sporadic messages trigger on demand e.g. setting a program status word requires a request and an acknowledgement. The acknowledgement and the request are sporadic messages.</p>
<p>Sporadic messages should have a reserved bandwidth of at least 10% (in an alarm shower case, the alarm messages will be prioritized). An overload case must be handled at the application level e.g. turn off all streaming messages and go to a graceful degradation state or a fail-save state. Note that time triggered communication eliminates such cases because each message transmission is pre-scheduled.</p>

</div>
</div>
</div>
<div id="commands" class="section level1">
<h1><span class="header-section-number">10</span> Commands</h1>
<div id="blocks" class="section level2">
<h2><span class="header-section-number">10.1</span> Blocks</h2>
<table>
<colgroup>
<col width="2%" />
<col width="31%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Block</th>
<th>Short Description</th>
<th>Extended Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x00</code></td>
<td><a href="#block:system">System</a></td>
<td>System commands are used to modify/request the state of each unit (e.g. reset) or an the overall system state (e.g. transmission speed)</td>
</tr>
<tr class="even">
<td align="right"><code>0x04</code></td>
<td><a href="#block:streaming">Streaming</a></td>
<td>Streaming commands are used to transmit data streams, but may be also used for single requests. The super frame is also located in this block.</td>
</tr>
<tr class="odd">
<td align="right"><code>0x08</code></td>
<td><a href="#block:Statistical-Data-and-Quantity">Statistical Data and Quantity</a></td>
<td>This command group is used to store statistical data that can be used for histograms such as operating time and the number of power on/off cycles</td>
</tr>
<tr class="even">
<td align="right"><code>0x28</code></td>
<td><a href="#block:Configuration">Configuration</a></td>
<td>This command block is used to set configuration data (e.g. you can set the sampling rate of acceleration data here).</td>
</tr>
<tr class="odd">
<td align="right"><code>0x3D</code></td>
<td><a href="#block:EEPROM">EEPROM</a></td>
<td>Used for writing and reading EEPROM data directly</td>
</tr>
<tr class="even">
<td align="right"><code>0x3E</code></td>
<td><a href="#block:ProductionData-and-RFID">ProductData and RFID</a></td>
<td>Used to store product data like a serial number. Furthermore, this block provides access to RFID information that is supported via connected tools.</td>
</tr>
<tr class="odd">
<td align="right"><code>0x3F</code></td>
<td><a href="#block:Test">Test</a></td>
<td>Test Config Page</td>
</tr>
</tbody>
</table>
<p><a name="block:system"></a></p>
</div>
<div id="block-system" class="section level2">
<h2><span class="header-section-number">10.2</span> Block <code>System</code></h2>
<table>
<thead>
<tr class="header">
<th align="right">Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x00</code></td>
<td><a href="#command:verboten">Verboten</a></td>
<td>–</td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><code>0x01</code></td>
<td><a href="#command:reset">Reset</a></td>
<td>Event</td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><code>0x02</code></td>
<td><a href="#command:get-set-state">Get/Set State</a></td>
<td>Read/Write</td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><code>0x05</code></td>
<td><a href="#command:get-node-status">Get Node Status</a></td>
<td>Read/Write</td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><code>0x06</code></td>
<td><a href="#command:get-error-status">Get Error Status</a></td>
<td>Read/Write</td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><code>0x0B</code></td>
<td><a href="#command:bluetooth">Bluetooth</a></td>
<td>Read</td>
<td>–</td>
</tr>
</tbody>
</table>
<p><a name="command:verboten"></a></p>
<div id="command-verboten" class="section level3">
<h3><span class="header-section-number">10.2.1</span> Command <code>Verboten</code></h3>
<p>This command is mainly used for initialization purposes</p>
<p><a name="command:reset"></a></p>
</div>
<div id="command-reset" class="section level3">
<h3><span class="header-section-number">10.2.2</span> Command <code>Reset</code></h3>
<p>Reset the specified receiver. This command has no payload.</p>
<p><a name="command:get-set-state"></a></p>
</div>
<div id="command-getset-state" class="section level3">
<h3><span class="header-section-number">10.2.3</span> Command <code>Get/Set State</code></h3>
<ul>
<li>Not fully implemented</li>
<li>Startup state determines operating state</li>
<li>Standby state works</li>
</ul>
<div id="values" class="section level4">
<h4><span class="header-section-number">10.2.3.1</span> Values</h4>
<ul>
<li><p><a name="value:get-set-state"><code>Get/Set State</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Get State</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Set State</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:location"><code>Location</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>No Change</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Bootloader</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>Application</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>Reserved</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:state"><code>State</code></a>:</p>
<table>
<colgroup>
<col width="5%" />
<col width="94%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Failure (No acknowledgement will be sent; <br/> Only power on resets this state)</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Error (No active communication)</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>Turn Off/Standby</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>Graceful degradation level 2</td>
</tr>
<tr class="odd">
<td align="right"><code>4</code></td>
<td>Graceful degradation level 1</td>
</tr>
<tr class="even">
<td align="right"><code>5</code></td>
<td>Operating</td>
</tr>
<tr class="odd">
<td align="right"><code>6</code></td>
<td>Startup</td>
</tr>
<tr class="even">
<td align="right"><code>7</code></td>
<td>No change</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:error-reason"><code>Error Reason</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>1</code></td>
<td>Set state not available</td>
</tr>
<tr class="even">
<td align="right"><code>2</code></td>
<td>Wrong subscriber (e.g. accessing application as bootloader)</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="payload-1" class="section level4">
<h4><span class="header-section-number">10.2.3.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6</td>
<td align="center">Bit 5 – 4</td>
<td align="center">Bit 3</td>
<td align="center">Bit 2 – 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:get-set-state"><code>Get/Set State</code></a></td>
<td align="center">Reserved</td>
<td align="center"><a href="#value:location"><code>Location</code></a></td>
<td align="center">Reserved</td>
<td align="center"><a href="#value:state"><code>State</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload" class="section level4">
<h4><span class="header-section-number">10.2.3.3</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th>Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x08</code></td>
</tr>
</tbody>
</table>
</div>
<div id="error-payload" class="section level4">
<h4><span class="header-section-number">10.2.3.4</span> Error Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:error-reason"><code>Error Reason</code></a></td>
</tr>
</tbody>
</table>
<p><a name="command:get-node-status"></a></p>
</div>
</div>
<div id="command-get-node-status" class="section level3">
<h3><span class="header-section-number">10.2.4</span> Command <code>Get Node Status</code></h3>
<ul>
<li><p>Note that the state may not be set instantly.</p></li>
<li><p>The node status word is defined differently for STH and STU</p></li>
<li><p>STH node status word:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">typedef</span> <span class="kw">union</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>{</span>
<span id="cb3-3"><a href="#cb3-3"></a> <span class="kw">struct</span></span>
<span id="cb3-4"><a href="#cb3-4"></a> {</span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="dt">uint32_t</span> bError :<span class="dv">1</span>; <span class="co">/**&lt; Error or healthy */</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="dt">uint32_t</span> u3NetworkState :<span class="dv">3</span>; <span class="co">/**&lt; Which state has node in the network */</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="dt">uint32_t</span> Reserved :<span class="dv">28</span>; <span class="co">/**&lt; Reserved */</span></span>
<span id="cb3-8"><a href="#cb3-8"></a> };</span>
<span id="cb3-9"><a href="#cb3-9"></a> <span class="dt">uint32_t</span> u32Word;</span>
<span id="cb3-10"><a href="#cb3-10"></a> <span class="dt">uint8_t</span> au8Bytes[<span class="dv">4</span><span class="bu">U</span>];</span>
<span id="cb3-11"><a href="#cb3-11"></a>} NodeStatusWord_t;</span></code></pre></div></li>
<li><p>STU node staus word:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a>  <span class="kw">struct</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  {</span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="dt">uint32_t</span> bError :<span class="dv">1</span>; <span class="co">/**&lt; Indicates an overall Error */</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="dt">uint32_t</span> u3NetworkState :<span class="dv">3</span>; <span class="co">/**&lt; Which state has node in the network */</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="dt">uint32_t</span> bEnabledRadio :<span class="dv">1</span>; <span class="co">/**&lt; Radio port enabled(1) or disabled(0) */</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="dt">uint32_t</span> bEnabledCan :<span class="dv">1</span>; <span class="co">/**&lt; CAN port enabled(1) or disabled(0) */</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="dt">uint32_t</span> bRadioActive :<span class="dv">1</span>; <span class="co">/**&lt; Radio Active(Connected to Bluetooth) or not */</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="dt">uint32_t</span> Reserved :<span class="dv">25</span>; <span class="co">/**&lt; Reserved */</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>  };</span>
<span id="cb4-10"><a href="#cb4-10"></a>  <span class="dt">uint32_t</span> u32Word;</span>
<span id="cb4-11"><a href="#cb4-11"></a>  <span class="dt">uint8_t</span> au8Bytes[<span class="dv">4</span><span class="bu">U</span>];</span>
<span id="cb4-12"><a href="#cb4-12"></a>} NodeStatusWord_t;</span></code></pre></div></li>
<li><p><a name="value:error-bit"><code>Error Bit</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>No Error</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Error</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:network-state"><code>Network State</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Failure</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Error</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>Standby</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>Graceful Degradation 2</td>
</tr>
<tr class="odd">
<td align="right"><code>4</code></td>
<td>Graceful Degradation 1</td>
</tr>
<tr class="even">
<td align="right"><code>5</code></td>
<td>Operating</td>
</tr>
<tr class="odd">
<td align="right"><code>6</code></td>
<td>Startup</td>
</tr>
<tr class="even">
<td align="right"><code>7</code></td>
<td>No Change</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:radio-port"><code>Radio Port</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Radio Port Disabled</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Radio Port Enabled</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:can-port"><code>CAN Port</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>CAN Port Disabled</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>CAN Port Enabled</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:radio-activity"><code>Radio Activity</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Disconnected from Bluetooth</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Connected to Bluetooth</td>
</tr>
</tbody>
</table></li>
</ul>
<div id="payload-2" class="section level4">
<h4><span class="header-section-number">10.2.4.1</span> Payload</h4>
<ul>
<li>Setting the value <code>0</code> for the node status word mask means that we request the status word</li>
<li>Currently the only supported payload should be 8 null (<code>0x00</code>) bytes</li>
</ul>
<div id="sth" class="section level5">
<h5><span class="header-section-number">10.2.4.1.1</span> STH</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7 – 4</td>
<td align="center">Bit 3 – 1</td>
<td align="center">Bit 0</td>
</tr>
<tr class="even">
<td align="center">Reserved</td>
<td align="center"><a href="#value:network-state"><code>Network State</code></a></td>
<td align="center"><a href="#value:error-bit"><code>Error Bit</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="stu" class="section level5">
<h5><span class="header-section-number">10.2.4.1.2</span> STU</h5>
<table>
<colgroup>
<col width="4%" />
<col width="20%" />
<col width="18%" />
<col width="20%" />
<col width="19%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6</td>
<td align="center">Bit 5</td>
<td align="center">Bit 4</td>
<td align="center">Bit 3 – 1</td>
<td align="center">Bit 0</td>
</tr>
<tr class="even">
<td align="center">Reserved</td>
<td align="center"><a href="#value:radio-activity"><code>Radio Activity</code></a></td>
<td align="center"><a href="#value:can-port"><code>CAN Port</code></a> Enabled</td>
<td align="center"><a href="#value:radio-port"><code>Radio Port</code></a> Enabled</td>
<td align="center"><a href="#value:network-state"><code>Network State</code></a></td>
<td align="center"><a href="#value:error-bit"><code>Error Bit</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="sth-stu" class="section level5">
<h5><span class="header-section-number">10.2.4.1.3</span> STH &amp; STU</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="acknowledgement-payload" class="section level4">
<h4><span class="header-section-number">10.2.4.2</span> Acknowledgement Payload</h4>
<ul>
<li>Same structure as payload</li>
</ul>
</div>
<div id="error-payload-1" class="section level4">
<h4><span class="header-section-number">10.2.4.3</span> Error Payload</h4>
<ul>
<li>The (possibly incorrect) length of the status word (5 instead of 4 bytes) was taken from the original documentation.</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Mask Used Not Allowed</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word</td>
</tr>
</tbody>
</table>
<p><a name="command:get-error-status"></a></p>
</div>
</div>
<div id="command-get-error-status" class="section level3">
<h3><span class="header-section-number">10.2.5</span> Command <code>Get Error Status</code></h3>
<ul>
<li><p>STH definition:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">typedef</span> <span class="kw">union</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>{</span>
<span id="cb5-3"><a href="#cb5-3"></a> <span class="kw">struct</span></span>
<span id="cb5-4"><a href="#cb5-4"></a> {</span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="dt">uint32_t</span> bTxBluetoothFail :<span class="dv">1</span>; <span class="co">/**&lt; Tx Fail Counter for Bluetooth (non single set) */</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="dt">uint32_t</span> bAdcOverRun :<span class="dv">1</span>;  <span class="co">/**&lt; Determines ADC over run (not able to shuffle data in time) */</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="dt">uint32_t</span> Reserved :<span class="dv">30</span>;</span>
<span id="cb5-8"><a href="#cb5-8"></a> };</span>
<span id="cb5-9"><a href="#cb5-9"></a> <span class="dt">uint32_t</span> u32Word;</span>
<span id="cb5-10"><a href="#cb5-10"></a> <span class="dt">uint8_t</span> au8Bytes[<span class="dv">4</span><span class="bu">U</span>];</span>
<span id="cb5-11"><a href="#cb5-11"></a>} ErrorStatusWord_t;</span></code></pre></div></li>
<li><p>STU definition:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">typedef</span> <span class="kw">union</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>{</span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="kw">struct</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  {</span>
<span id="cb6-5"><a href="#cb6-5"></a>      <span class="dt">uint32_t</span> bTxCanFail :<span class="dv">1</span>; <span class="co">/**&lt; Tx Fail Counter for CAN (non single set) */</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>      <span class="dt">uint32_t</span> Reserved :<span class="dv">31</span>; <span class="co">/**&lt; DAC was not fed */</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>  };</span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="dt">uint32_t</span> u32Word;</span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="dt">uint8_t</span> au8Bytes[<span class="dv">4</span><span class="bu">U</span>];</span>
<span id="cb6-10"><a href="#cb6-10"></a>} ErrorStatusWord_t;</span></code></pre></div></li>
<li><p><a name="value:transmission-failure"><code>Transmission Failure</code></a> (Bluetooth for STH, CAN for STU):</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>No Transmission Failure</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Transmission Failure</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:adc-overrun"><code>ADC Overrun</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>No ADC Overrun Error</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>ADC Overrun Error</td>
</tr>
</tbody>
</table></li>
</ul>
<div id="payload-3" class="section level4">
<h4><span class="header-section-number">10.2.5.1</span> Payload</h4>
<ul>
<li>Setting the value <code>0</code> for the status word mask means that we request the error status word</li>
<li>Currently the only supported payload should be 8 null (<code>0x00</code>) bytes</li>
</ul>
<div id="sth-1" class="section level5">
<h5><span class="header-section-number">10.2.5.1.1</span> STH</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7 – 2</td>
<td align="center">Bit 1</td>
<td align="center">Bit 0</td>
</tr>
<tr class="even">
<td align="center">Reserved</td>
<td align="center"><a href="#value:adc-overrun"><code>ADC Overrun</code></a></td>
<td align="center">Bluetooth <a href="#value:transmission-failure"><code>Transmission Failure</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="stu-1" class="section level5">
<h5><span class="header-section-number">10.2.5.1.2</span> STU</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7 – 2</td>
<td align="center">Bit 0</td>
</tr>
<tr class="even">
<td align="center">Reserved</td>
<td align="center">CAN <a href="#value:transmission-failure"><code>Transmission Failure</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="sth-stu-1" class="section level5">
<h5><span class="header-section-number">10.2.5.1.3</span> STH &amp; STU</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 7</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Status Word Mask</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="acknowledgement-payload-1" class="section level4">
<h4><span class="header-section-number">10.2.5.2</span> Acknowledgement Payload</h4>
<ul>
<li>Same structure as payload</li>
</ul>
</div>
<div id="error-payload-2" class="section level4">
<h4><span class="header-section-number">10.2.5.3</span> Error Payload</h4>
<ul>
<li>Same structure as error payload for node status command</li>
</ul>
<p><a name="command:bluetooth"></a></p>
</div>
</div>
<div id="command-bluetooth" class="section level3">
<h3><span class="header-section-number">10.2.6</span> Command <code>Bluetooth</code></h3>
<ul>
<li><p>In general you need at least the following commands to connect to an STH</p>
<ol style="list-style-type: decimal">
<li><code>Activate</code>: Activate Bluetooth on the STU</li>
<li><code>Get number of available devices</code>: Check which STHs are available at the STU</li>
<li><code>Connect to device (with Bluetooth MAC address)</code> or <code>Connect to device (with device number)</code>: Connect to the STH at the specified STU</li>
</ol>
<p>Connecting to the STH will not work, if you do not <strong>check for available devices first</strong></p></li>
<li><p><a name="value:bluetooth-subcommand"><code>Bluetooth Subcommand</code></a></p>
<table>
<colgroup>
<col width="31%" />
<col width="68%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><a name=command:bluetooth:0><code>0</code></a></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:1><code>1</code></a></td>
<td>Activate</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:2><code>2</code></a></td>
<td>Get number of available devices</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:3><code>3</code></a></td>
<td>Write device name #1 and set device name #2 to <code>NULL</code></td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:4><code>4</code></a></td>
<td>Write device name #2 and push it to STH (read will be equivalent in the future)</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:5><code>5</code></a></td>
<td>Read first part (6 bytes) of device name</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:6><code>6</code></a></td>
<td>Read second part (2 bytes) of device name</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:7><code>7</code></a></td>
<td>Connect to device (with device number)</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:8><code>8</code></a></td>
<td>Check if connected</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:9><code>9</code></a></td>
<td>Deactivate</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:10><code>10</code></a></td>
<td>Get send counter</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:11><code>11</code></a></td>
<td>Received RX frames</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:12><code>12</code></a></td>
<td>Get RSSI (Received Signal Strength Indication)</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:13><code>13</code></a></td>
<td>Read energy mode reduced</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:14><code>14</code></a></td>
<td>Write energy mode reduced</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:15><code>15</code></a></td>
<td>Read energy mode lowest</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:16><code>16</code></a></td>
<td>Write energy mode lowest</td>
</tr>
<tr class="even">
<td align="right"><a name=command:bluetooth:17><code>17</code></a></td>
<td>Get Bluetooth MAC address</td>
</tr>
<tr class="odd">
<td align="right"><a name=command:bluetooth:18><code>18</code></a></td>
<td>Connect to device (with Bluetooth MAC address)</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:bluetooth-device-number"><code>Device Number</code></a>: Sequential positive number assigned by STU to available STH nodes</p>
<ul>
<li>For a single STH this number will be <code>0</code></li>
<li>The number <code>255</code> (<code>0xff</code>) is reserved for “self addressing” (used for example when we ask a connected STH for its own MAC address). <strong>Note</strong>: A connected STH also returns its own name, if you use the read name subcommands (<a href="#command:bluetooth:5"><code>5</code></a> and <a href="#command:bluetooth:6"><code>6</code></a>) and a device number other than <code>0xff</code>.</li>
</ul></li>
<li><p><a name="value:bluetooth-value"><code>Bluetooth Value</code></a></p>
<table>
<colgroup>
<col width="25%" />
<col width="74%" />
</colgroup>
<thead>
<tr class="header">
<th align="right"><a href="#value:bluetooth-subcommand"><code>Bluetooth Subcommand</code></a></th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:0"><code>0</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:1"><code>1</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:2"><code>2</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:3"><code>3</code></a></td>
<td>ASCII string</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:4"><code>4</code></a></td>
<td>ASCII string (<code>NULL</code>)</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:5"><code>5</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:6"><code>6</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:7"><code>7</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:8"><code>8</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:9"><code>9</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:10"><code>10</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:11"><code>11</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:12"><code>12</code></a></td>
<td>–</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:13"><code>13</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:14"><code>14</code></a></td>
<td>Byte 3 – 6: Time form normal to reduced energy mode in ms <br/> Byte 7 – 8: Advertisement time for reduced energy mode in ms <br/> Big endian</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:15"><code>15</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:16"><code>16</code></a></td>
<td>Byte 3 – 6: Time form reduced to lowest energy mode in ms <br/> Byte 7 – 8: Advertisement time for lowest energy mode in ms <br/> Little endian 0 = read</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:17"><code>17</code></a></td>
<td>–</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:18"><code>18</code></a></td>
<td>Bytes of Bluetooth MAC address in reversed order (from right to left)</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:bluetooth-return-value"><code>Bluetooth Return Value</code></a></p>
<table>
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead>
<tr class="header">
<th align="right"><a href="#value:bluetooth-subcommand"><code>Bluetooth Subcommand</code></a></th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:0"><code>0</code></a></td>
<td><code>NULL</code></td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:1"><code>1</code></a></td>
<td>6 Bytes containing <code>NULL</code> (<code>0</code>)</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:2"><code>2</code></a></td>
<td>ASCII string containing the number of available devices</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:3"><code>3</code></a></td>
<td>ASCII string</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:4"><code>4</code></a></td>
<td>ASCII string</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:5"><code>5</code></a></td>
<td>ASCII string containing the first 6 characters of the Bluetooth advertisement name</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:6"><code>6</code></a></td>
<td>• ASCII string containing the last 2 characters of the Bluetooth advertisement name <br/> • <code>NULL</code> if not connected</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:7"><code>7</code></a></td>
<td>First byte is: <br/> •<code>true</code> (<code>1</code>) if in search mode, at least single device was found, no legacy mode and scanning mode active <br/> • <code>false</code> (<code>0</code>) otherwise</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:8"><code>8</code></a></td>
<td>First byte is: <br/> • <code>true</code> (<code>1</code>) if connected <br/> • <code>false</code> (<code>0</code>) otherwise <br/> Followed by 5 bytes containing <code>NULL</code> (<code>0</code>)</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:9"><code>9</code></a></td>
<td>6 Bytes containing <code>NULL</code> (<code>0</code>)</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:10"><code>10</code></a></td>
<td>6 Byte <code>unsigned int</code></td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:11"><code>11</code></a></td>
<td>6 Byte <code>unsigned int</code></td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:12"><code>12</code></a></td>
<td>• First byte contains RSSI as signed number <br/> • All other bytes are <code>NULL</code> (<code>0</code>)</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:13"><code>13</code></a></td>
<td>Byte 3 – 6: Time form normal to reduced energy mode in ms <br/> Byte 7 – 8: Advertisement time for reduced energy mode in ms <br/> Big Endian</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:14"><code>14</code></a></td>
<td>Byte 3 – 6: Time form normal to reduced energy mode in ms <br/> Byte 7 – 8: Advertisement time for reduced energy mode in ms <br/> Big Endian</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:15"><code>15</code></a></td>
<td>Byte 3 – 6: Time form reduced to lowest energy mode in ms <br/> Byte 7 – 8: Advertisement time for lowest energy mode in ms <br/> Little Endian</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:16"><code>16</code></a></td>
<td>Byte 3 – 6: Time form reduced to lowest energy mode in ms <br/> Byte 7 – 8: Advertisement time for lowest energy mode in ms <br/> Little Endian</td>
</tr>
<tr class="even">
<td align="right"><a href="#command:bluetooth:17"><code>17</code></a></td>
<td>Bytes of Bluetooth MAC address in reversed order (from right to left)</td>
</tr>
<tr class="odd">
<td align="right"><a href="#command:bluetooth:18"><code>18</code></a></td>
<td>Bytes of Bluetooth MAC address in reversed order (from right to left)</td>
</tr>
</tbody>
</table></li>
</ul>
<div id="payload-4" class="section level4">
<h4><span class="header-section-number">10.2.6.1</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:bluetooth-subcommand"><code>Bluetooth Subcommand</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:bluetooth-device-number"><code>Device Number</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3 – 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:bluetooth-value"><code>Bluetooth Value</code></a></td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> Use <code>0</code> bytes if Device Number or <a href="#value:bluetooth-value"><code>Bluetooth Value</code></a> are not applicable (e.g. when you use the <code>Activate</code> command)</p>
</div>
<div id="acknowledgement-payload-2" class="section level4">
<h4><span class="header-section-number">10.2.6.2</span> Acknowledgement Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Same as Payload</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Same as Payload</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3 – 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:bluetooth-return-value"><code>Bluetooth Return Value</code></a></td>
</tr>
</tbody>
</table>
<p><a name="block:streaming"></a></p>
</div>
</div>
</div>
<div id="block-streaming" class="section level2">
<h2><span class="header-section-number">10.3</span> Block <code>Streaming</code></h2>
<table>
<thead>
<tr class="header">
<th>Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x01</code></td>
<td><a href="#command:acceleration">Acceleration</a></td>
<td>Event</td>
<td>–</td>
</tr>
<tr class="even">
<td><code>0x20</code></td>
<td><a href="#command:voltage">Voltage</a></td>
<td>Event</td>
<td>–</td>
</tr>
</tbody>
</table>
<div id="values-1" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Values</h3>
<ul>
<li><p>The <a name="value:data-sets"><code>Data Sets</code></a> bits used in the sections below can have the following values:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Data Amount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td>Stop (stream)</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td>1 data set</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td>3 data sets</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td>6 data sets</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td>10 data sets</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td>15 data sets</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td>20 data sets</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td>30 data sets</td>
</tr>
</tbody>
</table>
<p>The streaming data itself can have the following structure:</p>
<ul>
<li>value 1</li>
<li>value 2</li>
<li>value 3</li>
<li>value 1 / value 2 / value 3</li>
<li>value 1 / value 2</li>
<li>value 1 / value 3</li>
<li>value 2 / value 3</li>
</ul>
<p>The chronological order starts with the oldest set (BP) and continues with newer values (BP + t), where t is the time point.</p></li>
<li><p><a name="value:request"><code>Request</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Stream</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Single Request</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:bytes"><code>Bytes</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>2 Bytes for each data point</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>3 Byte for data point</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:active"><code>Active</code></a></p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Data for specified data point will not be measured/sent</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Data for specified data point will be measured/sent</td>
</tr>
</tbody>
</table></li>
</ul>
<p><a name="command:acceleration"></a></p>
</div>
<div id="command-acceleration" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Command <code>Acceleration</code></h3>
<ul>
<li>Requesting while streaming is possible</li>
<li>Only single stream allowed</li>
<li>Requesting stream in different format stops last stream</li>
<li>Tuple format (depending on active axis, see payload):
<ul>
<li>x/y/z</li>
<li>x/y</li>
<li>x/z</li>
<li>y/z</li>
</ul></li>
</ul>
<div id="payload-5" class="section level4">
<h4><span class="header-section-number">10.3.2.1</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6</td>
<td align="center">Bit 5</td>
<td align="center">Bit 4</td>
<td align="center">Bit 3</td>
<td align="center">Bit 2 – 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:request"><code>Request</code></a></td>
<td align="center"><a href="#value:bytes"><code>Bytes</code></a></td>
<td align="center">X-Axis <a href="#value:active"><code>Active</code></a></td>
<td align="center">Y-Axis <a href="#value:active"><code>Active</code></a></td>
<td align="center">Z-Axis <a href="#value:active"><code>Active</code></a></td>
<td align="center"><a href="#value:data-sets"><code>Data Sets</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-1" class="section level4">
<h4><span class="header-section-number">10.3.2.2</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Same as Payload</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Sequence Counter</td>
</tr>
</tbody>
</table>
<div id="byte-format" class="section level5">
<h5><span class="header-section-number">10.3.2.2.1</span> 2 Byte Format</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">MSB (BP)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">LSB (BP + 1)</td>
</tr>
</tbody>
</table>
</div>
<div id="byte-format-1" class="section level5">
<h5><span class="header-section-number">10.3.2.2.2</span> 3 Byte Format</h5>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">MSB (BP)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">(BP + 1)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">LSB (BP + 2)</td>
</tr>
</tbody>
</table>
<p><a name="command:voltage"></a></p>
</div>
</div>
</div>
<div id="command-voltage" class="section level3">
<h3><span class="header-section-number">10.3.3</span> Command <code>Voltage</code></h3>
<div id="notes" class="section level4">
<h4><span class="header-section-number">10.3.3.1</span> Notes</h4>
<ul>
<li>Highest voltage sampling rate determines bit stream rate</li>
<li>Requesting while streaming is possible</li>
</ul>
</div>
<div id="payload-6" class="section level4">
<h4><span class="header-section-number">10.3.3.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6</td>
<td align="center">Bit 5</td>
<td align="center">Bit 4</td>
<td align="center">Bit 3</td>
<td align="center">Bit 2 – 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:request"><code>Request</code></a></td>
<td align="center"><a href="#value:bytes"><code>Bytes</code></a></td>
<td align="center">Voltage 1 <a href="#value:active"><code>Active</code></a></td>
<td align="center">Voltage 2 <a href="#value:active"><code>Active</code></a></td>
<td align="center">Voltage 3 <a href="#value:active"><code>Active</code></a></td>
<td align="center"><a href="#value:data-sets"><code>Data Sets</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-2" class="section level4">
<h4><span class="header-section-number">10.3.3.3</span> Acknowledgment Payload</h4>
<p>The command uses the same format as the “Acknowledgment Payload” of the <code>Acceleration</code> command.</p>
<p><a name="block:Statistical-Data-and-Quantity"></a></p>
</div>
</div>
</div>
<div id="block-statistical-data-and-quantity" class="section level2">
<h2><span class="header-section-number">10.4</span> Block <code>Statistical Data and Quantity</code></h2>
<table>
<thead>
<tr class="header">
<th align="right">Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x00</code></td>
<td><a href="#command:Power-On-Cycles-Power-Off-Cycles">Power On Cycles, Power Off Cycles</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td align="right"><code>0x01</code></td>
<td><a href="#command:Operating-time">Operating time</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="odd">
<td align="right"><code>0x02</code></td>
<td><a href="#command:Under-Voltage-Counter">Under Voltage Counter</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td align="right"><code>0x03</code></td>
<td><a href="#command:Watchdog-Reset-Counter">Watchdog Reset Counter</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="odd">
<td align="right"><code>0x04</code></td>
<td><a href="#command:Production-Date">Production Date</a></td>
<td>Read</td>
<td>x</td>
</tr>
</tbody>
</table>
<p><a name="command:Power-On-Cycles-Power-Off-Cycles"></a></p>
<div id="command-power-on-cycles-power-off-cycles" class="section level3">
<h3><span class="header-section-number">10.4.1</span> Command <code>Power On Cycles, Power Off Cycles</code></h3>
<div id="notes-1" class="section level4">
<h4><span class="header-section-number">10.4.1.1</span> Notes</h4>
<ul>
<li>Power off means power away e.g. Accumulator out of energy</li>
<li>Power On includes resets</li>
</ul>
</div>
<div id="ack-payload" class="section level4">
<h4><span class="header-section-number">10.4.1.2</span> ACK Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) - Byte 4 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Power On Cycles</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5 (MSB) - Byte 8 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Power Off Cycles</td>
</tr>
</tbody>
</table>
<p><a name="command:Operating-time"></a></p>
</div>
</div>
<div id="command-operating-time" class="section level3">
<h3><span class="header-section-number">10.4.2</span> Command <code>Operating time</code></h3>
<div id="notes-2" class="section level4">
<h4><span class="header-section-number">10.4.2.1</span> Notes</h4>
<ul>
<li>Seconds since first power are stored each half an hour</li>
<li>The STH also stored seconds since reset in disconnect case.</li>
</ul>
</div>
<div id="ack-payload-1" class="section level4">
<h4><span class="header-section-number">10.4.2.2</span> ACK Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) - Byte 4 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Seconds since reset</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5 (MSB) - Byte 8 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Seconds since first power on</td>
</tr>
</tbody>
</table>
<p><a name="command:Under-Voltage-Counter"></a></p>
</div>
</div>
<div id="command-under-voltage-counter" class="section level3">
<h3><span class="header-section-number">10.4.3</span> Command <code>Under Voltage Counter</code></h3>
<div id="ack-payload-2" class="section level4">
<h4><span class="header-section-number">10.4.3.1</span> ACK Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) - Byte 4 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Under voltage counter since first power on</td>
</tr>
</tbody>
</table>
<p><a name="command:Watchdog-Reset-Counter"></a></p>
</div>
</div>
<div id="command-watchdog-reset-counter" class="section level3">
<h3><span class="header-section-number">10.4.4</span> Command <code>Watchdog Reset Counter</code></h3>
<div id="ack-payload-3" class="section level4">
<h4><span class="header-section-number">10.4.4.1</span> ACK Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) - Byte 4 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Watchdog Resets since first power on</td>
</tr>
</tbody>
</table>
<p><a name="command:Production-Date"></a></p>
</div>
</div>
<div id="command-production-date" class="section level3">
<h3><span class="header-section-number">10.4.5</span> Command <code>Production Date</code></h3>
<div id="ack-payload-4" class="section level4">
<h4><span class="header-section-number">10.4.5.1</span> ACK Payload</h4>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) - Byte 4 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">ASCII String of the Production Date in the format: yyyymmdd where y=year, m=month, d=day</td>
</tr>
</tbody>
</table>
<p><a name="block:Configuration"></a></p>
</div>
</div>
</div>
<div id="block-configuration" class="section level2">
<h2><span class="header-section-number">10.5</span> Block <code>Configuration</code></h2>
<table>
<thead>
<tr class="header">
<th>Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x00</code></td>
<td><a href="#command:Get-Set-Acceleration-Configuration">Get/Set Acceleration Configuration</a></td>
<td>Read/Write</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x60</code></td>
<td><a href="#command:Get-Set-Calibration-Factor-k">Get/Set Calibration Factor k</a></td>
<td>Read/Write</td>
<td>x</td>
</tr>
<tr class="odd">
<td><code>0x61</code></td>
<td><a href="#command:Get-Set-Calibration-Factor-d">Get/Set Calibration Factor d</a></td>
<td>Read/Write</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x62</code></td>
<td><a href="#command:Callibration-Measurement">Calibration Measurement</a></td>
<td>Read/Write</td>
<td>x</td>
</tr>
<tr class="odd">
<td><code>0xC0</code></td>
<td><a href="#command:HMI-Configuration">HMI Configuration</a></td>
<td>Read/Write</td>
<td>x</td>
</tr>
</tbody>
</table>
<p><a name="command:Get-Set-Acceleration-Configuration"></a></p>
<div id="command-getset-acceleration-configuration" class="section level3">
<h3><span class="header-section-number">10.5.1</span> Command <code>Get/Set Acceleration Configuration</code></h3>
<div id="notes-3" class="section level4">
<h4><span class="header-section-number">10.5.1.1</span> Notes</h4>
<div id="sampling-rate" class="section level5">
<h5><span class="header-section-number">10.5.1.1.1</span> Sampling Rate</h5>
<p><span class="math display">\[ \frac{f\_{CLOCK}}{(Prescaler+1)·(AcquisitionTime + 12+1) · OverSamplingRate} \]</span></p>
<p><span class="math display">\[f_{clock}=38400000 Hz\]</span></p>
</div>
<div id="prescaler" class="section level5">
<h5><span class="header-section-number">10.5.1.1.2</span> Prescaler</h5>
<ul>
<li>Byte2</li>
</ul>
</div>
<div id="acquisition-time" class="section level5">
<h5><span class="header-section-number">10.5.1.1.3</span> Acquisition Time</h5>
<ul>
<li>Sample and Hold Time i.e. Time to charge capacitor that is cut off and measured at digital quantisation</li>
<li>2^(Byte3-1) iff Byte3 &gt; AdcAcquisitionTime4</li>
<li>(Byte3+2) iff Byte3 &lt; =AdcAcquisitionTime4</li>
</ul>
</div>
<div id="over-sampling-rate" class="section level5">
<h5><span class="header-section-number">10.5.1.1.4</span> Over Sampling Rate</h5>
<ul>
<li>2^Byte4; No Over Sampling if Byte4=0</li>
</ul>
</div>
<div id="adc-reference-voltage" class="section level5">
<h5><span class="header-section-number">10.5.1.1.5</span> ADC Reference Voltage</h5>
<ul>
<li>1V25</li>
<li>1V65</li>
<li>1V8</li>
<li>2V1</li>
<li>2V2</li>
<li>2V5</li>
<li>2V7</li>
<li>3V3(VDD)</li>
<li>5V</li>
<li>6V6</li>
</ul>
</div>
<div id="setting-at-reset" class="section level5">
<h5><span class="header-section-number">10.5.1.1.6</span> Setting at Reset</h5>
<ul>
<li>2/Aqu8(4)/OverSampling64(6)/VDD</li>
</ul>
</div>
</div>
<div id="values-2" class="section level4">
<h4><span class="header-section-number">10.5.1.2</span> Values</h4>
<ul>
<li><p><a name="value:get-set-state2"><code>Get/Set State</code></a>:</p>
<table>
<thead>
<tr class="header">
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0</code></td>
<td>Get State</td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>Set State</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="payload-7" class="section level4">
<h4><span class="header-section-number">10.5.1.3</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6 – 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:get-set-state2"><code>Get/Set State</code></a></td>
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">ADC Prescaler</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Acquisition time (See Note)</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Power of over sampling rate e.g. 10-&gt;1024 OverSampling Rate, 0=no Over Sampling</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reference: Voltage*20 e.g. 3.3V-&gt;66</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 6 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-3" class="section level4">
<h4><span class="header-section-number">10.5.1.4</span> Acknowledgment Payload</h4>
<ul>
<li>Same structure as payload</li>
</ul>
<p><a name="command:Get-Set-Calibration-Factor-k"></a></p>
</div>
</div>
<div id="command-getset-calibration-factor-k" class="section level3">
<h3><span class="header-section-number">10.5.2</span> Command <code>Get/Set Calibration Factor k</code></h3>
<div id="values-3" class="section level4">
<h4><span class="header-section-number">10.5.2.1</span> Values</h4>
<ul>
<li><p><a name="value:calibration-element"><code>Calibration Element</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Acceleration</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Temperature</td>
</tr>
<tr class="odd">
<td align="right"><code>32</code></td>
<td>Voltage</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:number-of-axis"><code>Number or axis</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>x-Axis / First measure point</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>y-Axis / Second measure point</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>z-Axis / Third measure point</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:get-set-value"><code>Get/Set Value</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Get Value</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Set Value</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="payload-8" class="section level4">
<h4><span class="header-section-number">10.5.2.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:calibration-element"><code>Calibration Element</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:number-of-axis"><code>Number or axis</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6 – 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:get-set-value"><code>Get/Set Value</code></a></td>
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Byte 5 (MSB) - Byte 8 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">k (Slope) according to IEEE 754 single precision (float)<br /><br />Calibration=kx+d (Also calculation to SI value or any other value)</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-4" class="section level4">
<h4><span class="header-section-number">10.5.2.3</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:calibration-element"><code>Calibration Element</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:number-of-axis"><code>Number or axis</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Byte 5 (MSB) - Byte 8 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">k (Slope) according to IEEE 754 single precision (float)<br /><br />Calibration=kx+d (Also calculation to SI value or any other value)</td>
</tr>
</tbody>
</table>
<p><a name="command:Get-Set-Callibration-Factor-d"></a></p>
</div>
</div>
<div id="command-getset-calibration-factor-d" class="section level3">
<h3><span class="header-section-number">10.5.3</span> Command <code>Get/Set Calibration Factor d</code></h3>
<p>Payload and Acknowledgment Payload have the same Structure as <a href="#command:Get-Set-Calibration-Factor-k"><code>Get/Set Calibration Factor k</code></a> but with <code>d (Offset)</code> instead of <code>k (Slope)</code> from <code>kx+d</code>.</p>
<p><a name="command:Calibration-Measurement"></a></p>
</div>
<div id="command-calibration-measurement" class="section level3">
<h3><span class="header-section-number">10.5.4</span> Command <code>Calibration Measurement</code></h3>
<div id="values-4" class="section level4">
<h4><span class="header-section-number">10.5.4.1</span> Values</h4>
<ul>
<li><p><a name="value:calibration-Get-Set"><code>Calibration Get/Set</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Get (Ignores the remaining bits of this byte)</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Set</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:calibration-Method"><code>Calibration Method</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Inject</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>Eject</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>Measure</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:calibration-Measurement-Element"><code>Calibration Measurement Element</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Acceleration</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Temperature (for VREF=1250 temperature gets calculated to m°C)</td>
</tr>
<tr class="odd">
<td align="right"><code>32</code></td>
<td>Voltage</td>
</tr>
<tr class="even">
<td align="right"><code>96</code></td>
<td>VSS(Ground)</td>
</tr>
<tr class="odd">
<td align="right"><code>97</code></td>
<td>VDD (Supply)</td>
</tr>
<tr class="even">
<td align="right"><code>98</code></td>
<td>Regulated Internal Power</td>
</tr>
<tr class="odd">
<td align="right"><code>99</code></td>
<td>Operation Amplifier Output</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:Dimension"><code>Dimension</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>1. Dimension(x)</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>2. Dimension(y)</td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>3. Dimension(z)</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="payload-9" class="section level4">
<h4><span class="header-section-number">10.5.4.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6 - Bit 5</td>
<td align="center">Bit 4</td>
<td align="center">Bit 3 - Bit 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:calibration-Get-Set"><code>Calibration Get/Set</code></a></td>
<td align="center"><a href="#value:calibration-Method"><code>Calibration Method</code></a></td>
<td align="center">Reset</td>
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:calibration-Measurement-Element"><code>Calibration Measurement Element</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:Dimension"><code>Dimension</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-5" class="section level4">
<h4><span class="header-section-number">10.5.4.3</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 - Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Same as Payload</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Result</td>
</tr>
</tbody>
</table>
<p><a name="command:HMI-Configuration"></a></p>
</div>
</div>
<div id="command-hmi-configuration" class="section level3">
<h3><span class="header-section-number">10.5.5</span> Command <code>HMI Configuration</code></h3>
<div id="values-5" class="section level4">
<h4><span class="header-section-number">10.5.5.1</span> Values</h4>
<ul>
<li><p><a name="value:Get-Set-Sampling-Rate"><code>Get/Set Sampling Rate</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Get Sampling Rate</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Set Sampling Rate</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:LED"><code>LED</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>LED</td>
</tr>
</tbody>
</table></li>
<li><p><a name="value:ON-OFF"><code>ON/OFF</code></a>:</p>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>On (Reset value)</td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>Off</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="payload-10" class="section level4">
<h4><span class="header-section-number">10.5.5.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Bit 7</td>
<td align="center">Bit 6 - Bit 0</td>
</tr>
<tr class="even">
<td align="center"><a href="#value:Get-Set-Sampling-Rate"><code>Get/Set Sampling Rate</code></a></td>
<td align="center"><a href="#value:LED"><code>LED</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Number (0-255)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><a href="#value:ON-OFF"><code>ON/OFF</code></a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">Byte 5 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-6" class="section level4">
<h4><span class="header-section-number">10.5.5.3</span> Acknowledgment Payload</h4>
<ul>
<li>Same structure as payload</li>
</ul>
<p><a name="block:EEPROM"></a></p>
</div>
</div>
</div>
<div id="block-eeprom" class="section level2">
<h2><span class="header-section-number">10.6</span> Block <code>EEPROM</code></h2>
<table>
<thead>
<tr class="header">
<th align="right">Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0x00</code></td>
<td><a href="#command:EEPROM-Read">EEPROM Read</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td align="right"><code>0x01</code></td>
<td><a href="#command:EEPROM-Write">EEPROM Write</a></td>
<td>Write</td>
<td>x</td>
</tr>
</tbody>
</table>
<p><a name="command:EEPROM-Read"></a></p>
<div id="command-eeprom-read" class="section level3">
<h3><span class="header-section-number">10.6.1</span> Command <code>EEPROM Read</code></h3>
<div id="notes-4" class="section level4">
<h4><span class="header-section-number">10.6.1.1</span> Notes</h4>
<ul>
<li>Used to read data from EEPROM directly</li>
</ul>
</div>
<div id="payload-11" class="section level4">
<h4><span class="header-section-number">10.6.1.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center">Byte 2</th>
<th align="center">Byte 3</th>
<th align="center">Byte 4 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Page</td>
<td align="center">Offset</td>
<td align="center">Length</td>
<td align="center">Reserved</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-7" class="section level4">
<h4><span class="header-section-number">10.6.1.3</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center">Byte 2</th>
<th align="center">Byte 3</th>
<th align="center">Byte 4</th>
<th align="center">Byte 5 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Page</td>
<td align="center">Offset</td>
<td align="center">Length</td>
<td align="center">Reserved</td>
<td align="center">Data</td>
</tr>
</tbody>
</table>
<p><a name="command:EEPROM-Write"></a></p>
</div>
</div>
<div id="command-eeprom-write" class="section level3">
<h3><span class="header-section-number">10.6.2</span> Command <code>EEPROM Write</code></h3>
<div id="notes-5" class="section level4">
<h4><span class="header-section-number">10.6.2.1</span> Notes</h4>
<ul>
<li>Used to write data to EEPROM directly</li>
<li>You are not allowed to change all values, if the EEPROM is locked (<a href="https://github.com/MyTooliT/EEPROM/blob/master/EEPROM.md">byte <code>0</code> is set to value <code>0xca</code></a>)</li>
</ul>
</div>
<div id="payload-12" class="section level4">
<h4><span class="header-section-number">10.6.2.2</span> Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1</th>
<th align="center">Byte 2</th>
<th align="center">Byte 3</th>
<th align="center">Byte 4</th>
<th align="center">Byte 5 - Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Page</td>
<td align="center">Offset</td>
<td align="center">Length</td>
<td align="center">Reserved</td>
<td align="center">Data</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-8" class="section level4">
<h4><span class="header-section-number">10.6.2.3</span> Acknowledgment Payload</h4>
<ul>
<li>Same structure as payload</li>
</ul>
<p><a name="block:ProductionData-and-RFID"></a></p>
</div>
</div>
</div>
<div id="block-productdata-and-rfid" class="section level2">
<h2><span class="header-section-number">10.7</span> Block <code>ProductData and RFID</code></h2>
<table>
<thead>
<tr class="header">
<th>Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x00</code></td>
<td><a href="#command:GTIN">Global Trade Identification Number (GTIN)</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x01</code></td>
<td><a href="#command:Hardware-Version">Hardware Version</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="odd">
<td><code>0x02</code></td>
<td><a href="#command:Firmware-Version">Firmware Version</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x03</code></td>
<td><a href="#command:Release-Name">Release Name</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="odd">
<td><code>0x04</code> - <code>0x07</code></td>
<td><a href="#command:Serial-Number">Serial Number 1-4</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x08</code> - <code>0x17</code></td>
<td><a href="#command:Name">Name 1-16</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="odd">
<td><code>0x18</code> - <code>0x1F</code></td>
<td><a href="#command:OEM-Free-Use">OEM Free Use 0-7</a></td>
<td>Read</td>
<td>x</td>
</tr>
<tr class="even">
<td><code>0x80</code></td>
<td><a href="#command:Tool-RFID-product-information">Tool RFID product information</a></td>
<td>Read</td>
<td>-</td>
</tr>
</tbody>
</table>
<p><a name="command:GTIN"></a></p>
<div id="command-global-trade-identification-number-gtin" class="section level3">
<h3><span class="header-section-number">10.7.1</span> Command <code>Global Trade Identification Number (GTIN)</code></h3>
<div id="acknowledgment-payload-9" class="section level4">
<h4><span class="header-section-number">10.7.1.1</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 (MSB) – Byte 8 (LSB)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">GTIN (<code>unsigned int</code>)</td>
</tr>
</tbody>
</table>
<p><a name="command:Hardware-Version"></a></p>
</div>
</div>
<div id="command-hardware-version" class="section level3">
<h3><span class="header-section-number">10.7.2</span> Command <code>Hardware Version</code></h3>
<div id="acknowledgment-payload-10" class="section level4">
<h4><span class="header-section-number">10.7.2.1</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 – Byte 5</th>
<th align="center">Byte 6</th>
<th align="center">Byte 7</th>
<th align="center">Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
<td align="center">Major Version</td>
<td align="center">Minor Version</td>
<td align="center">Patch Version</td>
</tr>
</tbody>
</table>
<p><a name="command:Firmware-Version"></a></p>
</div>
</div>
<div id="command-firmware-version" class="section level3">
<h3><span class="header-section-number">10.7.3</span> Command <code>Firmware Version</code></h3>
<div id="acknowledgment-payload-11" class="section level4">
<h4><span class="header-section-number">10.7.3.1</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 – Byte 5</th>
<th align="center">Byte 6</th>
<th align="center">Byte 7</th>
<th align="center">Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Reserved</td>
<td align="center">Major Version</td>
<td align="center">Minor Version</td>
<td align="center">Patch Version</td>
</tr>
</tbody>
</table>
<p><a name="command:Release-Name"></a></p>
</div>
</div>
<div id="command-release-name" class="section level3">
<h3><span class="header-section-number">10.7.4</span> Command <code>Release Name</code></h3>
<div id="acknowledgment-payload-12" class="section level4">
<h4><span class="header-section-number">10.7.4.1</span> Acknowledgment Payload</h4>
<table>
<thead>
<tr class="header">
<th align="center">Byte 1 – Byte 8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Firmware Release Name (ASCII)</td>
</tr>
</tbody>
</table>
<ul>
<li><code>NULL</code> terminated or 8 bytes long</li>
</ul>
<p><a name="command:Serial-Number"></a></p>
</div>
</div>
<div id="command-serial-number" class="section level3">
<h3><span class="header-section-number">10.7.5</span> Command <code>Serial Number</code></h3>
<div id="notes-6" class="section level4">
<h4><span class="header-section-number">10.7.5.1</span> Notes</h4>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x04</code></td>
<td>Serial Number 1</td>
</tr>
<tr class="even">
<td><code>0x05</code></td>
<td>Serial Number 2</td>
</tr>
<tr class="odd">
<td><code>0x06</code></td>
<td>Serial Number 3</td>
</tr>
<tr class="even">
<td><code>0x07</code></td>
<td>Serial Number 4</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-13" class="section level4">
<h4><span class="header-section-number">10.7.5.2</span> Acknowledgment Payload</h4>
<ul>
<li>UTF-8 String (8 Byte)</li>
</ul>
<p><a name="command:Name"></a></p>
</div>
</div>
<div id="command-name" class="section level3">
<h3><span class="header-section-number">10.7.6</span> Command <code>Name</code></h3>
<div id="notes-7" class="section level4">
<h4><span class="header-section-number">10.7.6.1</span> Notes</h4>
<ul>
<li>Multiple Strings in different languages possible</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x08</code></td>
<td>Name 1</td>
</tr>
<tr class="even">
<td><code>0x09</code></td>
<td>Name 2</td>
</tr>
<tr class="odd">
<td><code>0x0A</code></td>
<td>Name 3</td>
</tr>
<tr class="even">
<td><code>0x0B</code></td>
<td>Name 4</td>
</tr>
<tr class="odd">
<td><code>0x0C</code></td>
<td>Name 5</td>
</tr>
<tr class="even">
<td><code>0x0D</code></td>
<td>Name 6</td>
</tr>
<tr class="odd">
<td><code>0x0E</code></td>
<td>Name 7</td>
</tr>
<tr class="even">
<td><code>0x0F</code></td>
<td>Name 8</td>
</tr>
<tr class="odd">
<td><code>0x10</code></td>
<td>Name 9</td>
</tr>
<tr class="even">
<td><code>0x11</code></td>
<td>Name 10</td>
</tr>
<tr class="odd">
<td><code>0x12</code></td>
<td>Name 11</td>
</tr>
<tr class="even">
<td><code>0x13</code></td>
<td>Name 12</td>
</tr>
<tr class="odd">
<td><code>0x14</code></td>
<td>Name 13</td>
</tr>
<tr class="even">
<td><code>0x15</code></td>
<td>Name 14</td>
</tr>
<tr class="odd">
<td><code>0x16</code></td>
<td>Name 15</td>
</tr>
<tr class="even">
<td><code>0x17</code></td>
<td>Name 16</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-14" class="section level4">
<h4><span class="header-section-number">10.7.6.2</span> Acknowledgment Payload</h4>
<ul>
<li>UTF-8 String (8 Byte)</li>
</ul>
<p><a name="command:OEM-Free-Use"></a></p>
</div>
</div>
<div id="command-oem-free-use" class="section level3">
<h3><span class="header-section-number">10.7.7</span> Command <code>OEM Free Use</code></h3>
<div id="notes-8" class="section level4">
<h4><span class="header-section-number">10.7.7.1</span> Notes</h4>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x18</code></td>
<td>OEM Free Use 0</td>
</tr>
<tr class="even">
<td><code>0x19</code></td>
<td>OEM Free Use 1</td>
</tr>
<tr class="odd">
<td><code>0x1A</code></td>
<td>OEM Free Use 2</td>
</tr>
<tr class="even">
<td><code>0x1B</code></td>
<td>OEM Free Use 3</td>
</tr>
<tr class="odd">
<td><code>0x1C</code></td>
<td>OEM Free Use 4</td>
</tr>
<tr class="even">
<td><code>0x1D</code></td>
<td>OEM Free Use 5</td>
</tr>
<tr class="odd">
<td><code>0x1E</code></td>
<td>OEM Free Use 6</td>
</tr>
<tr class="even">
<td><code>0x1F</code></td>
<td>OEM Free Use 7</td>
</tr>
</tbody>
</table>
</div>
<div id="acknowledgment-payload-15" class="section level4">
<h4><span class="header-section-number">10.7.7.2</span> Acknowledgment Payload</h4>
<ul>
<li>8 Byte</li>
</ul>
<p><a name="command:Tool-RFID-product-information"></a></p>
</div>
</div>
<div id="command-tool-rfid-product-information" class="section level3">
<h3><span class="header-section-number">10.7.8</span> Command <code>Tool RFID product information</code></h3>
<div id="acknowledgment-payload-16" class="section level4">
<h4><span class="header-section-number">10.7.8.1</span> Acknowledgment Payload</h4>
<ul>
<li>to be determined</li>
</ul>
<p><a name="block:Test"></a></p>
</div>
</div>
</div>
<div id="block-test" class="section level2">
<h2><span class="header-section-number">10.8</span> Block <code>Test</code></h2>
<table>
<thead>
<tr class="header">
<th>Number</th>
<th>Block Command</th>
<th>Access</th>
<th>Permanently Stored</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>0x00</code></td>
<td>Reserved</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td><code>0x01</code></td>
<td><a href="#command:Test-signal">Test signal</a></td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p><a name="command:Test-signal"></a></p>
<div id="command-test-signal" class="section level3">
<h3><span class="header-section-number">10.8.1</span> Command <code>Test signal</code></h3>
<div id="payload-13" class="section level4">
<h4><span class="header-section-number">10.8.1.1</span> Payload</h4>
<div id="byte-1" class="section level5">
<h5><span class="header-section-number">10.8.1.1.1</span> Byte 1:</h5>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td>Line</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td>Ramp</td>
</tr>
</tbody>
</table>
</div>
<div id="byte-2" class="section level5">
<h5><span class="header-section-number">10.8.1.1.2</span> Byte 2:</h5>
<p>Module (Module specific)</p>
</div>
<div id="byte-3-8" class="section level5">
<h5><span class="header-section-number">10.8.1.1.3</span> Byte 3-8:</h5>
<p>Module specific</p>
</div>
</div>
<div id="acknowledgment-payload-17" class="section level4">
<h4><span class="header-section-number">10.8.1.2</span> Acknowledgment Payload</h4>
<div id="byte-1-1" class="section level5">
<h5><span class="header-section-number">10.8.1.2.1</span> Byte 1:</h5>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td>Reserved</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td>Line</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td>Ramp</td>
</tr>
</tbody>
</table>
</div>
<div id="byte-2-3" class="section level5">
<h5><span class="header-section-number">10.8.1.2.2</span> Byte 2-3:</h5>
<p>Module (Module specific)</p>
</div>
<div id="byte-4-8" class="section level5">
<h5><span class="header-section-number">10.8.1.2.3</span> Byte 4-8:</h5>
<p>Module specific</p>
</div>
</div>
</div>
</div>
<div id="errors" class="section level2">
<h2><span class="header-section-number">10.9</span> Errors</h2>
<table>
<thead>
<tr class="header">
<th align="right">Value</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>0</code></td>
<td>Specific Error</td>
<td></td>
</tr>
<tr class="even">
<td align="right"><code>1</code></td>
<td>Not available</td>
<td></td>
</tr>
<tr class="odd">
<td align="right"><code>2</code></td>
<td>General Error</td>
<td></td>
</tr>
<tr class="even">
<td align="right"><code>3</code></td>
<td>Write not allowed</td>
<td>Setting of memory area in word not allowed</td>
</tr>
<tr class="odd">
<td align="right"><code>4</code></td>
<td>Unsupported format</td>
<td>64 Byte Data via CAN2.0 is not possible</td>
</tr>
<tr class="even">
<td align="right"><code>5</code></td>
<td>Wrong key/magic number</td>
<td></td>
</tr>
<tr class="odd">
<td align="right"><code>6</code></td>
<td>No SuperFrame inside SuperFrame</td>
<td></td>
</tr>
<tr class="even">
<td align="right"><code>7</code></td>
<td>EEPROM defect</td>
<td></td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Documentation.pdf", "Documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
